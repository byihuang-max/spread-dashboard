# 商品CTA PCA环境诊断

> 2026-03-01 Roni × Eva 共创

## 核心命题

商品指数长期低夏普（熊长牛短），海外 hedge fund 主要用趋势跟踪做 CTA。传统方法用人为定义的指标（波动率+趋势占比+成交量比）评估 CTA 环境，PCA 方法让数据自己说话。

## 为什么用 PCA

对所有活跃期货品种的等权日收益率做主成分分析：

- **PC1**（第一主成分）= 全市场共同运动方向，比等权指数更聪明——自动按解释力分配权重，不会被板块对冲抵消信号
- **PC2**（第二主成分）= 与 PC1 正交的最大分化轴，通常对应板块对立（如工业品 vs 农产品、内需 vs 外需）

## 关键指标

| 指标 | 含义 | CTA 环境判读 |
|------|------|-------------|
| PC1 方差解释比 | 品种共振程度 | 高(>35%)=趋势环境好，低(<20%)=震荡 |
| PC2 方差解释比 | 市场内部分化程度 | 高=两阵营对抗 |
| PC1+PC2 联合 | 市场结构清晰度 | 合计>50%=结构清晰 |
| PC1 累计值 | 动量 vs 反转 | 持续同方向=动量主导，频繁翻转=反转主导 |

## 环境类型四象限

- **PC1高 + PC2低** → 单一趋势主导（最好的 CTA 环境）
- **PC1高 + PC2高** → 双阵营对抗（板块轮动，方向型 CTA 难做但多空 CTA 能做）
- **PC1低 + PC2低** → 全市场震荡（最差环境）
- **PC1低 + PC2高** → 个别板块独立行情

## 比传统 CTA 友好度好在哪

| | 传统（mod1） | PCA（mod1b） |
|---|---|---|
| 权重 | 人为定义 0.4/0.3/0.3 | 数据驱动，自适应 |
| 趋势定义 | 规则判定（MA斜率>0.5%算趋势） | 协方差结构，品种共振自然涌现 |
| 板块对冲 | 不处理 | PC1 能识别"方向不同但波动同步放大" |
| 因果链 | 波动率×趋势占比×成交量比（间接） | 方差解释比=共振强度=趋势跟踪盈利条件（直接） |

## PCA Loading 增强品种扫描

- PC1 loading 高的品种 = **驱动全市场节奏的主力**（谁在带节奏）
- PC2 loading 高的品种 = **市场分化的旗手**（谁在对抗）
- 板块一致性 = 同板块品种 loading 的标准差，越小越一致
- 分化轴 = PC2 正向 vs 负向最大的板块

## 实现细节

- 滚动窗口：60 个交易日
- 品种池：日均成交额 > 500 万的活跃连续合约（约 58 个）
- PCA 方法：协方差矩阵 + 幂迭代法（纯 Python，无 numpy 依赖）
- 数据源：`fut_daily.csv`（现有 commodity_data.py 生成，无需新数据）

## 文件

| 文件 | 说明 |
|------|------|
| `mod1b_pca_engine.py` | PCA 核心引擎：滚动 PCA + 环境类型 + 友好度 |
| `mod2b_pca_loading.py` | Loading 增强扫描：品种角色 + 板块一致性 + 分化轴 |
| `mod1b_pca_engine.json` | mod1b 输出（滚动时序 + 最新 loading 快照） |
| `mod2b_pca_loading.json` | mod2b 输出（增强品种分析 + 板块聚合） |

## Roni 的投研洞察

- 商品指数长期低夏普，趋势跟踪是主流策略 → PCA 方差解释比直接对应趋势跟踪盈利条件
- 保留原 mod1/mod2 作为可折叠参考（涨跌幅更直观），新 PCA 模块作为主角
- 从数学角度 PCA 更好解释量化 CTA 环境，从直觉角度保留涨跌幅版本辅助理解
