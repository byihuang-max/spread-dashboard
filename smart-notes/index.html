<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Notes â€” GAMT æŠ•ç ”çŸ¥è¯†åº“</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
  --bg: #1e1e2e; --bg2: #252536; --bg3: #2d2d44;
  --text: #cdd6f4; --text2: #a6adc8; --text3: #6c7086;
  --accent: #89b4fa; --accent2: #74c7ec; --green: #a6e3a1;
  --yellow: #f9e2af; --red: #f38ba8; --mauve: #cba6f7;
  --border: #45475a; --hover: #313244;
}
body { font-family: -apple-system, 'PingFang SC', 'Microsoft YaHei', sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; overflow: hidden; }
.sidebar { width: 280px; min-width: 280px; background: var(--bg2); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
.sidebar-header { padding: 20px; border-bottom: 1px solid var(--border); }
.sidebar-header h1 { font-size: 16px; margin-bottom: 12px; }
.search-box { width: 100%; padding: 8px 12px; background: var(--bg3); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 13px; outline: none; }
.search-box:focus { border-color: var(--accent); }
.nav-section { flex: 1; overflow-y: auto; padding: 12px; }
.nav-group-title { font-size: 11px; color: var(--text3); text-transform: uppercase; padding: 8px 0 4px; font-weight: 600; }
.nav-item { padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 13px; color: var(--text2); display: flex; align-items: center; gap: 6px; }
.nav-item:hover { background: var(--hover); }
.nav-item.active { background: var(--accent); color: var(--bg); font-weight: 600; }
.icon { font-size: 10px; opacity: 0.6; }
.main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.toolbar { padding: 10px 24px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; font-size: 12px; color: var(--text3); }
.toolbar button { background: var(--bg3); border: 1px solid var(--border); color: var(--text2); padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; }
.toolbar button:hover { border-color: var(--accent); color: var(--accent); }
.toolbar button.active { background: var(--accent); color: var(--bg); border-color: var(--accent); }
.toolbar .spacer { flex: 1; }
#breadcrumb { flex: 1; }
#contentArea { flex: 1; overflow-y: auto; padding: 32px 48px; }
.note-title { font-size: 28px; font-weight: 700; margin-bottom: 24px; color: var(--text); }
.note-body { line-height: 1.8; font-size: 14px; }
.note-body h2 { font-size: 20px; margin: 24px 0 12px; color: var(--accent); }
.note-body h3 { font-size: 16px; margin: 18px 0 8px; color: var(--text); }
.note-body p { margin-bottom: 8px; }
.note-body ul { padding-left: 20px; margin-bottom: 8px; }
.note-body li { margin-bottom: 4px; }
.note-body blockquote { border-left: 3px solid var(--mauve); padding: 8px 16px; margin: 12px 0; color: var(--text2); background: var(--bg3); border-radius: 0 8px 8px 0; }
.note-body pre { background: var(--bg3); padding: 12px 16px; border-radius: 8px; overflow-x: auto; margin: 12px 0; }
.note-body code { background: var(--bg3); padding: 2px 6px; border-radius: 4px; font-size: 13px; }
.note-body pre code { background: none; padding: 0; }
.note-body table { border-collapse: collapse; margin: 12px 0; width: 100%; }
.note-body th, .note-body td { border: 1px solid var(--border); padding: 6px 10px; font-size: 13px; text-align: left; }
.note-body th { background: var(--bg3); }
.wiki-link { color: var(--accent); cursor: pointer; text-decoration: underline; text-underline-offset: 2px; }
.wiki-link:hover { color: var(--accent2); }
.wiki-link.broken { color: var(--red); text-decoration: line-through; cursor: default; }
.tag { color: var(--yellow); cursor: pointer; font-size: 12px; }
.tag:hover { text-decoration: underline; }
.backlinks { margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border); }
.backlinks h3 { font-size: 14px; color: var(--text3); margin-bottom: 10px; }
.backlink-item { padding: 8px 12px; border-radius: 8px; cursor: pointer; margin-bottom: 4px; }
.backlink-item:hover { background: var(--hover); }
.backlink-item .context { font-size: 12px; color: var(--text3); margin-top: 2px; }
.welcome { text-align: center; padding-top: 120px; color: var(--text3); }
.welcome h2 { font-size: 24px; color: var(--text2); margin-bottom: 12px; }
.welcome p { line-height: 1.8; }
.shortcuts { display: flex; gap: 20px; justify-content: center; margin-top: 24px; }
.shortcut { font-size: 12px; color: var(--text3); }
.shortcut kbd { background: var(--bg3); padding: 2px 8px; border-radius: 4px; border: 1px solid var(--border); }
.search-results .search-result { padding: 12px; border-radius: 8px; cursor: pointer; margin-bottom: 8px; }
.search-results .search-result:hover { background: var(--hover); }
.search-results .title { font-weight: 600; }
.search-results .path { font-size: 11px; color: var(--text3); }
.search-results .snippet { font-size: 13px; color: var(--text2); margin-top: 4px; }
.search-results mark { background: var(--yellow); color: var(--bg); padding: 0 2px; border-radius: 2px; }
.btn-new { width: 100%; padding: 8px; margin-top: 10px; background: var(--bg3); border: 1px dashed var(--border); border-radius: 8px; color: var(--text3); cursor: pointer; font-size: 13px; }
.btn-new:hover { border-color: var(--accent); color: var(--accent); }
.editor-area { width: 100%; height: calc(100vh - 200px); background: var(--bg3); color: var(--text); border: 1px solid var(--border); border-radius: 8px; padding: 16px; font-family: 'SF Mono', 'Fira Code', monospace; font-size: 13px; line-height: 1.7; resize: none; outline: none; }
.editor-bar { display: flex; gap: 8px; margin-bottom: 12px; align-items: center; }
.editor-bar select { background: var(--bg3); color: var(--text); border: 1px solid var(--border); padding: 4px 8px; border-radius: 6px; font-size: 12px; }
.editor-bar input { background: var(--bg3); color: var(--text); border: 1px solid var(--border); padding: 4px 12px; border-radius: 6px; font-size: 13px; flex: 1; outline: none; }
.editor-bar input:focus { border-color: var(--accent); }
</style>
</head>
<body>
<div class="sidebar">
  <div class="sidebar-header">
    <h1>ğŸ“š Smart Notes</h1>
    <input type="text" class="search-box" id="searchInput" placeholder="æœç´¢ç¬”è®°... (âŒ˜K)">
    <button class="btn-new" onclick="newNote()">ï¼‹ æ–°å»ºç¬”è®°</button>
  </div>
  <div class="nav-section" id="navSection"></div>
</div>
<div class="main">
  <div class="toolbar">
    <span id="breadcrumb" style="flex:1"></span>
    <button id="btnEdit" onclick="toggleEdit()" style="display:none">âœï¸ ç¼–è¾‘</button>
    <button id="btnDelete" onclick="deleteNote()" style="display:none;color:var(--red)">ğŸ—‘ï¸ åˆ é™¤</button>
    <button id="btnNotes" class="active" onclick="switchView('notes')">ğŸ“ ç¬”è®°</button>
    <button id="btnGraph" onclick="switchView('graph')">ğŸ•¸ï¸ å›¾è°±</button>
  </div>
  <div id="contentArea"></div>
  <canvas id="graphCanvas" style="display:none; width:100%; height:100%;"></canvas>
</div>

<script>
const BUILTIN_NOTES = [{"name": "ç¦»æ•£åº¦", "path": "concepts/ç¦»æ•£åº¦.md", "category": "concepts", "content": "# ç¦»æ•£åº¦\n\n**å®šä¹‰ï¼š** ä¸ªè‚¡æ”¶ç›Šç‡çš„æˆªé¢æ ‡å‡†å·®ï¼Œè¡¡é‡å¸‚åœºä¸­ä¸ªè‚¡åˆ†åŒ–ç¨‹åº¦ã€‚\n\n**ä¸è¶…é¢çš„å…³ç³»ï¼š** ç¦»æ•£åº¦é«˜ â†’ ä¸ªè‚¡åˆ†åŒ–å¤§ â†’ é€‰è‚¡alphaç©ºé—´å¤§ â†’ é‡åŒ–è¶…é¢å®¹æ˜“åšã€‚ç¦»æ•£åº¦ä½ â†’ ä¸ªè‚¡åŒæ¶¨åŒè·Œ â†’ é€‰è°éƒ½å·®ä¸å¤š â†’ è¶…é¢æ”¶æ•›ã€‚\n\n**å…³é”®æ´å¯Ÿï¼š** ç¦»æ•£åº¦ä¸èƒ½å•ç‹¬çœ‹ï¼Œå¿…é¡»å’Œ[[é£æ ¼é›†ä¸­åº¦]]äº¤å‰åˆ¤æ–­ã€‚é«˜ç¦»æ•£åº¦+ä½é›†ä¸­åº¦=æœ€ä½³alphaç¯å¢ƒï¼›é«˜ç¦»æ•£åº¦+é«˜é›†ä¸­åº¦=å‡è±¡ï¼Œalphaè¢«é£æ ¼betaåƒæ‰ã€‚\n\n**ç›¸å…³è®¨è®ºï¼š**\n- [[2026-03-01_é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶]] â€” ç¦»æ•£åº¦ä½œä¸ºæ ¸å¿ƒå› å­çš„å®šä½\n- [[é‡åŒ–å®½åŸºè¶…é¢ç¯å¢ƒ]] â€” åœ¨æ•´ä½“æ¡†æ¶ä¸­çš„è§’è‰²\n\n**æ•°æ®æ¥æºï¼š** Tushare å…¨Aæ—¥çº¿ï¼Œè®¡ç®—æˆªé¢std\n\n**æ ‡ç­¾ï¼š** #é‡åŒ– #alphaç¯å¢ƒ #æ ¸å¿ƒæ¦‚å¿µ\n"}, {"name": "é£æ ¼é›†ä¸­åº¦", "path": "concepts/é£æ ¼é›†ä¸­åº¦.md", "category": "concepts", "content": "# é£æ ¼é›†ä¸­åº¦\n\n**å®šä¹‰ï¼š** å¸‚åœºæ”¶ç›Šè¢«å°‘æ•°é£æ ¼å› å­ï¼ˆå¤§å°ç›˜ã€è¡Œä¸šã€åŠ¨é‡ç­‰ï¼‰è§£é‡Šçš„ç¨‹åº¦ã€‚ç”¨ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰å‰Nä¸ªä¸»æˆåˆ†çš„è§£é‡Šæ–¹å·®æ¯”è¡¡é‡ã€‚\n\n**ä¸è¶…é¢çš„å…³ç³»ï¼š** é›†ä¸­åº¦é«˜ â†’ å¸‚åœºè¢«ä¸€ä¸¤ä¸ªé£æ ¼ä¸»å¯¼ï¼ˆæ¯”å¦‚\"åªæ¶¨å¤§ç¥¨\"ï¼‰â†’ é‡åŒ–å¤šå› å­æ¨¡å‹å®¹æ˜“è¢«å•ä¸€é£æ ¼ç¢¾å‹ â†’ è¶…é¢éš¾åšã€‚\n\n**Roniçš„æ´å¯Ÿï¼š** \"é›†ä¸­åº¦å’Œ[[ç¦»æ•£åº¦]]æ˜¯äº¤äº’é¡¹ï¼Œä¸èƒ½ç®€å•åŠ æƒã€‚\" ä¸¤è€…ç»„åˆæ‰æœ‰æ„ä¹‰ï¼š\n- é«˜ç¦»æ•£åº¦ + ä½é›†ä¸­åº¦ = âœ… æœ€ä½³alphaç¯å¢ƒ\n- é«˜ç¦»æ•£åº¦ + é«˜é›†ä¸­åº¦ = âš ï¸ å‡è±¡ï¼Œåˆ†åŒ–æ¥è‡ªé£æ ¼è€Œéä¸ªè‚¡alpha\n- ä½ç¦»æ•£åº¦ + é«˜é›†ä¸­åº¦ = âŒ æœ€å·®ç¯å¢ƒ\n- ä½ç¦»æ•£åº¦ + ä½é›†ä¸­åº¦ = ğŸ˜ å¹³æ·¡ï¼Œè¶…é¢ä¸€èˆ¬\n\n**ç›¸å…³è®¨è®ºï¼š**\n- [[2026-03-01_é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶]]\n- [[ç¦»æ•£åº¦]]\n\n**æ ‡ç­¾ï¼š** #é‡åŒ– #alphaç¯å¢ƒ #æ ¸å¿ƒæ¦‚å¿µ\n"}, {"name": "åŸºå·®æƒ…ç»ª", "path": "concepts/åŸºå·®æƒ…ç»ª.md", "category": "concepts", "content": "# åŸºå·®æƒ…ç»ª\n\n**å®šä¹‰ï¼š** è‚¡æŒ‡æœŸè´§ç›¸å¯¹ç°è´§çš„å‡è´´æ°´å¹…åº¦ï¼Œåæ˜ å¸‚åœºå¯¹å†²éœ€æ±‚å’Œæƒ…ç»ªã€‚\n\n**Roniçš„å…³é”®æ´å¯Ÿï¼ˆåç›´è§‰ï¼‰ï¼š**\n> \"åŸºå·®æ˜¯ç»“æœå˜é‡ä¸æ˜¯åŸå› ã€‚å‡æ°´ = æƒ…ç»ªè¿‡çƒ­ + å¤§ç¥¨è™¹å¸ â†’ è¶…é¢åè€Œéš¾åšã€‚\"\n\nè¿™è·Ÿå¾ˆå¤šäººçš„ç›´è§‰ç›¸å â€” å¾ˆå¤šäººä»¥ä¸ºå‡æ°´=å¸‚åœºå¥½=è¶…é¢å¥½åšï¼Œä½†å®é™…ä¸Šï¼š\n- **æ·±è´´æ°´** â†’ å¯¹å†²æˆæœ¬é«˜ï¼Œä½†alphaç¯å¢ƒå¾€å¾€å¥½ï¼ˆææ…Œæ—¶ä¸ªè‚¡åˆ†åŒ–å¤§ï¼‰\n- **å‡æ°´** â†’ å¯¹å†²æœ‰æ”¶ç›Šï¼Œä½†å¾€å¾€ä¼´éšé£æ ¼æç«¯é›†ä¸­ï¼ˆå¤§ç¥¨æŠ±å›¢ï¼‰â†’ è¶…é¢åè€Œæ”¶æ•›\n\n**ä½¿ç”¨æ–¹å¼ï¼š** å¿…é¡»ç”¨å†å²åˆ†ä½æ•°æ¯”è¾ƒï¼Œç»å¯¹å€¼æ²¡æœ‰æ„ä¹‰ã€‚å½“å‰åŸºå·®åœ¨è¿‡å»ä¸€å¹´çš„åˆ†ä½å†³å®šä¿¡å·å¼ºå¼±ã€‚\n\n**åœ¨æ¡†æ¶ä¸­çš„è§’è‰²ï¼š** ä¿®æ­£é¡¹ï¼Œä¸æ˜¯æ ¸å¿ƒé©±åŠ¨ã€‚å…ˆçœ‹[[ç¦»æ•£åº¦]]Ã—[[é£æ ¼é›†ä¸­åº¦]]ï¼Œå†ç”¨åŸºå·®æƒ…ç»ªåšä¿®æ­£ã€‚\n\n**ç›¸å…³è®¨è®ºï¼š**\n- [[2026-03-01_é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶]]\n- [[é‡åŒ–å®½åŸºè¶…é¢ç¯å¢ƒ]]\n\n**æ ‡ç­¾ï¼š** #é‡åŒ– #alphaç¯å¢ƒ #æƒ…ç»ªæŒ‡æ ‡\n"}, {"name": "æƒ…ç»ªé‡åŒ–", "path": "concepts/æƒ…ç»ªé‡åŒ–.md", "category": "concepts", "content": "# æƒ…ç»ªé‡åŒ–\n\n**æ ¸å¿ƒé—®é¢˜ï¼š** å¸‚åœºæƒ…ç»ªå¦‚ä½•ä»\"æ„Ÿè§‰\"å˜æˆå¯è®¡ç®—çš„æ•°å­—ï¼Ÿ\n\n**Roniæå‡ºçš„æŒ‘æˆ˜ï¼š**\nåœ¨è®¨è®º[[å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…]]æ—¶ï¼ŒRoniæŒ‡å‡ºï¼šæƒ…ç»ªæ˜¯æ¨¡ç³Šçš„ï¼Œæ€ä¹ˆç•Œå®š\"æƒ…ç»ªé«˜\"è¿˜æ˜¯\"æƒ…ç»ªä½\"ï¼Ÿå°±åƒé‡åŒ–äº¤æ˜“ä¸€æ ·ï¼Œå‚æ•°çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ\n\n**å½“å‰æ–¹æ¡ˆï¼ˆå¼ºåŠ¿è‚¡æ¨¡å—ï¼‰ï¼š**\n- æ¶¨åœå®¶æ•°ã€è·Œåœå®¶æ•°ã€è¿æ¿é«˜åº¦ â†’ é‡åŒ–èµšé’±æ•ˆåº”\n- å…¨Aæˆäº¤é¢åŠå…¶æ³¢åŠ¨ç‡ï¼ˆCVï¼‰â†’ èµ„é‡‘æ´»è·ƒåº¦\n- åŒ—å‘èµ„é‡‘æµå‘ â†’ å¤–èµ„æƒ…ç»ª\n\n**æœªè§£å†³çš„é—®é¢˜ï¼š**\n- æƒ…ç»ªæŒ‡æ ‡çš„é˜ˆå€¼å¦‚ä½•ç¡®å®šï¼Ÿå›ºå®šé˜ˆå€¼ vs æ»šåŠ¨åˆ†ä½æ•°ï¼Ÿ\n- ä¸åŒå¸‚åœºç¯å¢ƒä¸‹é˜ˆå€¼æ˜¯å¦éœ€è¦è‡ªé€‚åº”ï¼Ÿ\n- å½“å¸‚åœºregimeåˆ‡æ¢æ—¶ï¼Œå†å²å‚æ•°å¯èƒ½å¤±æ•ˆ â†’ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦è®°å½•\"å½“æ—¶ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾\"\n\n**Roniçš„æ‹…å¿§ï¼š**\n> \"å¯èƒ½æœ‰ä¸€å¤©å¸‚åœºç¯å¢ƒå˜äº†ï¼Œæˆ‘çªç„¶å¿˜è®°äº†å½“æ—¶æˆ‘ä»¬ä¸ºä»€ä¹ˆä¼šæŠŠå‚æ•°è®¾ç½®æˆè¿™æ ·ã€‚\"\nâ†’ è¿™æ­£æ˜¯è¿™ä¸ªçŸ¥è¯†åº“å­˜åœ¨çš„æ„ä¹‰ã€‚\n\n**ç›¸å…³è®¨è®ºï¼š**\n- [[å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…]]\n- [[2026-03-01_å¼ºåŠ¿è‚¡æ¨¡å—è®¨è®º]]\n\n**æ ‡ç­¾ï¼š** #æ–¹æ³•è®º #æƒ…ç»ª #å‚æ•°è®¾è®¡\n"}, {"name": "å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…", "path": "concepts/å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é….md", "category": "concepts", "content": "# å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…\n\n**ç”¨é€”ï¼š** åˆ¤æ–­å½“å‰å¸‚åœºç¯å¢ƒæ˜¯å¦é€‚åˆå¼ºåŠ¿è‚¡/æ‰“æ¿ç­–ç•¥ã€‚\n\n**æ ¸å¿ƒé€»è¾‘ï¼š** å¼ºåŠ¿è‚¡ç­–ç•¥ä¾èµ–èµšé’±æ•ˆåº”å’Œå¸‚åœºæƒ…ç»ªï¼Œç¯å¢ƒå¥½æ—¶çˆ†å‘åŠ›å¼ºï¼Œç¯å¢ƒå·®æ—¶å›æ’¤ä¹Ÿå¤§ã€‚éœ€è¦ä¸€ä¸ª\"æ²¹é—¨/åˆ¹è½¦\"ä¿¡å·ã€‚\n\n**æ¨¡å—ä½ç½®ï¼š** `env_fit/momentum_stock/`\n\n**æ•°æ®æ„æˆï¼š**\n- æ¶¨è·Œåœå®¶æ•°ã€è¿æ¿é«˜åº¦ â†’ èµšé’±æ•ˆåº”\n- å…¨Aæˆäº¤é¢ + CV â†’ èµ„é‡‘æ´»è·ƒåº¦å’Œç¨³å®šæ€§\n- åŒ—å‘èµ„é‡‘ â†’ å¤–èµ„æƒ…ç»ªå‚è€ƒ\n\n**å…³é”®è®¨è®ºï¼š**\n- [[æƒ…ç»ªé‡åŒ–]] â€” Roniæå‡ºçš„æ ¸å¿ƒé—®é¢˜ï¼šæƒ…ç»ªæŒ‡æ ‡çš„é˜ˆå€¼æ€ä¹ˆå®šï¼Ÿ\n- å‚æ•°è®¾è®¡éœ€è¦è®°å½•\"ä¸ºä»€ä¹ˆ\"ï¼Œä¸åªæ˜¯\"æ˜¯ä»€ä¹ˆ\"\n\n**è®¾è®¡å†³ç­–è®°å½•ï¼š**\n- æˆäº¤é¢ç”¨20æ—¥å‡å€¼+CVï¼Œè€Œéç®€å•å‡çº¿ â†’ å› ä¸º\"ç¨³å®šæ”¾é‡ > è„‰å†²æ”¾é‡\"ï¼ˆRoniåŸè¯ï¼‰\n\n**æ ‡ç­¾ï¼š** #ç­–ç•¥ç¯å¢ƒ #å¼ºåŠ¿è‚¡ #æ¨¡å—è®¾è®¡\n"}, {"name": "å•†å“CTA PCAç¯å¢ƒè¯Šæ–­", "path": "concepts/å•†å“CTA_PCAç¯å¢ƒè¯Šæ–­.md", "category": "concepts", "content": "# å•†å“CTA PCAç¯å¢ƒè¯Šæ–­\n\n> 2026-03-01 Roni Ã— Eva å…±åˆ›\n\n## æ ¸å¿ƒå‘½é¢˜\n\nå•†å“æŒ‡æ•°é•¿æœŸä½å¤æ™®ï¼ˆç†Šé•¿ç‰›çŸ­ï¼‰ï¼Œæµ·å¤– hedge fund ä¸»è¦ç”¨è¶‹åŠ¿è·Ÿè¸ªåš CTAã€‚ä¼ ç»Ÿæ–¹æ³•ç”¨äººä¸ºå®šä¹‰çš„æŒ‡æ ‡ï¼ˆæ³¢åŠ¨ç‡+è¶‹åŠ¿å æ¯”+æˆäº¤é‡æ¯”ï¼‰è¯„ä¼° CTA ç¯å¢ƒï¼ŒPCA æ–¹æ³•è®©æ•°æ®è‡ªå·±è¯´è¯ã€‚\n\n## ä¸ºä»€ä¹ˆç”¨ PCA\n\nå¯¹æ‰€æœ‰æ´»è·ƒæœŸè´§å“ç§çš„ç­‰æƒæ—¥æ”¶ç›Šç‡åšä¸»æˆåˆ†åˆ†æï¼š\n\n- **PC1**ï¼ˆç¬¬ä¸€ä¸»æˆåˆ†ï¼‰= å…¨å¸‚åœºå…±åŒè¿åŠ¨æ–¹å‘ï¼Œæ¯”ç­‰æƒæŒ‡æ•°æ›´èªæ˜â€”â€”è‡ªåŠ¨æŒ‰è§£é‡ŠåŠ›åˆ†é…æƒé‡ï¼Œä¸ä¼šè¢«æ¿å—å¯¹å†²æŠµæ¶ˆä¿¡å·\n- **PC2**ï¼ˆç¬¬äºŒä¸»æˆåˆ†ï¼‰= ä¸ PC1 æ­£äº¤çš„æœ€å¤§åˆ†åŒ–è½´ï¼Œé€šå¸¸å¯¹åº”æ¿å—å¯¹ç«‹ï¼ˆå¦‚å·¥ä¸šå“ vs å†œäº§å“ã€å†…éœ€ vs å¤–éœ€ï¼‰\n\n## å…³é”®æŒ‡æ ‡\n\n| æŒ‡æ ‡ | å«ä¹‰ | CTA ç¯å¢ƒåˆ¤è¯» |\n|------|------|-------------|\n| PC1 æ–¹å·®è§£é‡Šæ¯” | å“ç§å…±æŒ¯ç¨‹åº¦ | é«˜(>35%)=è¶‹åŠ¿ç¯å¢ƒå¥½ï¼Œä½(<20%)=éœ‡è¡ |\n| PC2 æ–¹å·®è§£é‡Šæ¯” | å¸‚åœºå†…éƒ¨åˆ†åŒ–ç¨‹åº¦ | é«˜=ä¸¤é˜µè¥å¯¹æŠ— |\n| PC1+PC2 è”åˆ | å¸‚åœºç»“æ„æ¸…æ™°åº¦ | åˆè®¡>50%=ç»“æ„æ¸…æ™° |\n| PC1 ç´¯è®¡å€¼ | åŠ¨é‡ vs åè½¬ | æŒç»­åŒæ–¹å‘=åŠ¨é‡ä¸»å¯¼ï¼Œé¢‘ç¹ç¿»è½¬=åè½¬ä¸»å¯¼ |\n\n## ç¯å¢ƒç±»å‹å››è±¡é™\n\n- **PC1é«˜ + PC2ä½** â†’ å•ä¸€è¶‹åŠ¿ä¸»å¯¼ï¼ˆæœ€å¥½çš„ CTA ç¯å¢ƒï¼‰\n- **PC1é«˜ + PC2é«˜** â†’ åŒé˜µè¥å¯¹æŠ—ï¼ˆæ¿å—è½®åŠ¨ï¼Œæ–¹å‘å‹ CTA éš¾åšä½†å¤šç©º CTA èƒ½åšï¼‰\n- **PC1ä½ + PC2ä½** â†’ å…¨å¸‚åœºéœ‡è¡ï¼ˆæœ€å·®ç¯å¢ƒï¼‰\n- **PC1ä½ + PC2é«˜** â†’ ä¸ªåˆ«æ¿å—ç‹¬ç«‹è¡Œæƒ…\n\n## æ¯”ä¼ ç»Ÿ CTA å‹å¥½åº¦å¥½åœ¨å“ª\n\n| | ä¼ ç»Ÿï¼ˆmod1ï¼‰ | PCAï¼ˆmod1bï¼‰ |\n|---|---|---|\n| æƒé‡ | äººä¸ºå®šä¹‰ 0.4/0.3/0.3 | æ•°æ®é©±åŠ¨ï¼Œè‡ªé€‚åº” |\n| è¶‹åŠ¿å®šä¹‰ | è§„åˆ™åˆ¤å®šï¼ˆMAæ–œç‡>0.5%ç®—è¶‹åŠ¿ï¼‰ | åæ–¹å·®ç»“æ„ï¼Œå“ç§å…±æŒ¯è‡ªç„¶æ¶Œç° |\n| æ¿å—å¯¹å†² | ä¸å¤„ç† | PC1 èƒ½è¯†åˆ«\"æ–¹å‘ä¸åŒä½†æ³¢åŠ¨åŒæ­¥æ”¾å¤§\" |\n| å› æœé“¾ | æ³¢åŠ¨ç‡Ã—è¶‹åŠ¿å æ¯”Ã—æˆäº¤é‡æ¯”ï¼ˆé—´æ¥ï¼‰ | æ–¹å·®è§£é‡Šæ¯”=å…±æŒ¯å¼ºåº¦=è¶‹åŠ¿è·Ÿè¸ªç›ˆåˆ©æ¡ä»¶ï¼ˆç›´æ¥ï¼‰ |\n\n## PCA Loading å¢å¼ºå“ç§æ‰«æ\n\n- PC1 loading é«˜çš„å“ç§ = **é©±åŠ¨å…¨å¸‚åœºèŠ‚å¥çš„ä¸»åŠ›**ï¼ˆè°åœ¨å¸¦èŠ‚å¥ï¼‰\n- PC2 loading é«˜çš„å“ç§ = **å¸‚åœºåˆ†åŒ–çš„æ——æ‰‹**ï¼ˆè°åœ¨å¯¹æŠ—ï¼‰\n- æ¿å—ä¸€è‡´æ€§ = åŒæ¿å—å“ç§ loading çš„æ ‡å‡†å·®ï¼Œè¶Šå°è¶Šä¸€è‡´\n- åˆ†åŒ–è½´ = PC2 æ­£å‘ vs è´Ÿå‘æœ€å¤§çš„æ¿å—\n\n## å®ç°ç»†èŠ‚\n\n- æ»šåŠ¨çª—å£ï¼š60 ä¸ªäº¤æ˜“æ—¥\n- å“ç§æ± ï¼šæ—¥å‡æˆäº¤é¢ > 500 ä¸‡çš„æ´»è·ƒè¿ç»­åˆçº¦ï¼ˆçº¦ 58 ä¸ªï¼‰\n- PCA æ–¹æ³•ï¼šåæ–¹å·®çŸ©é˜µ + å¹‚è¿­ä»£æ³•ï¼ˆçº¯ Pythonï¼Œæ—  numpy ä¾èµ–ï¼‰\n- æ•°æ®æºï¼š`fut_daily.csv`ï¼ˆç°æœ‰ commodity_data.py ç”Ÿæˆï¼Œæ— éœ€æ–°æ•°æ®ï¼‰\n\n## æ–‡ä»¶\n\n| æ–‡ä»¶ | è¯´æ˜ |\n|------|------|\n| `mod1b_pca_engine.py` | PCA æ ¸å¿ƒå¼•æ“ï¼šæ»šåŠ¨ PCA + ç¯å¢ƒç±»å‹ + å‹å¥½åº¦ |\n| `mod2b_pca_loading.py` | Loading å¢å¼ºæ‰«æï¼šå“ç§è§’è‰² + æ¿å—ä¸€è‡´æ€§ + åˆ†åŒ–è½´ |\n| `mod1b_pca_engine.json` | mod1b è¾“å‡ºï¼ˆæ»šåŠ¨æ—¶åº + æœ€æ–° loading å¿«ç…§ï¼‰ |\n| `mod2b_pca_loading.json` | mod2b è¾“å‡ºï¼ˆå¢å¼ºå“ç§åˆ†æ + æ¿å—èšåˆï¼‰ |\n\n## Roni çš„æŠ•ç ”æ´å¯Ÿ\n\n- å•†å“æŒ‡æ•°é•¿æœŸä½å¤æ™®ï¼Œè¶‹åŠ¿è·Ÿè¸ªæ˜¯ä¸»æµç­–ç•¥ â†’ PCA æ–¹å·®è§£é‡Šæ¯”ç›´æ¥å¯¹åº”è¶‹åŠ¿è·Ÿè¸ªç›ˆåˆ©æ¡ä»¶\n- ä¿ç•™åŸ mod1/mod2 ä½œä¸ºå¯æŠ˜å å‚è€ƒï¼ˆæ¶¨è·Œå¹…æ›´ç›´è§‚ï¼‰ï¼Œæ–° PCA æ¨¡å—ä½œä¸ºä¸»è§’\n- ä»æ•°å­¦è§’åº¦ PCA æ›´å¥½è§£é‡Šé‡åŒ– CTA ç¯å¢ƒï¼Œä»ç›´è§‰è§’åº¦ä¿ç•™æ¶¨è·Œå¹…ç‰ˆæœ¬è¾…åŠ©ç†è§£\n"}, {"name": "CTAæ³¢åŠ¨ç‡å› å­ä¸å½’å› ", "path": "concepts/CTAæ³¢åŠ¨ç‡å› å­ä¸å½’å› .md", "category": "concepts", "content": "# CTAè¶‹åŠ¿ç­–ç•¥çš„æ³¢åŠ¨ç‡å› å­\n\n**æ—¥æœŸï¼š** 2026-03-01\n**æ ‡ç­¾ï¼š** #CTA #æ³¢åŠ¨ç‡ #å½’å›  #å› å­æ¨¡å‹\n**å…³è”ï¼š** [[å•†å“CTA_PCAç¯å¢ƒè¯Šæ–­]]\n\n---\n\n## æ ¸å¿ƒæ´å¯Ÿ\n\nCTAè¶‹åŠ¿è·Ÿè¸ªç­–ç•¥çš„ç›ˆåˆ©å…¬å¼æœ¬è´¨ä¸Šæ˜¯ï¼š\n\n**æ”¶ç›Š â‰ˆ æ³¢åŠ¨ç‡ Ã— è¶‹åŠ¿æŒç»­æ€§ Ã— ä»“ä½**\n\nPCAæ–¹å·®è§£é‡Šæ¯”è¡¡é‡çš„æ˜¯\"è¶‹åŠ¿æŒç»­æ€§\"ï¼ˆå“ç§å…±æŒ¯å¼ºåº¦ï¼‰ï¼Œä½†é—æ¼äº†\"æ³¢åŠ¨ç‡æ°´å¹³\"è¿™ä¸ªå…³é”®ä¹˜æ•°ï¼š\n- é«˜æ³¢åŠ¨ + è¶‹åŠ¿ = æš´åˆ©ï¼ˆä¿¡å·å¹…åº¦å¤§ï¼Œæ­¢ç›ˆç©ºé—´å……è£•ï¼‰\n- ä½æ³¢åŠ¨ + è¶‹åŠ¿ = å¾®åˆ©ï¼ˆä¿¡å·æ·¹æ²¡åœ¨å™ªéŸ³ä¸­ï¼Œæ‰‹ç»­è´¹åƒæ‰åˆ©æ¶¦ï¼‰\n- PCAçœ‹ä¸å‡ºè¿™ä¸ªå·®åˆ« â€” ä¸¤ç§æƒ…å†µPC1è§£é‡Šæ¯”å¯èƒ½ä¸€æ ·é«˜\n\n## PCAä¸ºä»€ä¹ˆä¸èƒ½å•ç‹¬è§£é‡ŠCTAæ¶¨å¹…\n\nä»å®æµ‹æ•°æ®çœ‹ï¼š\n- PCAå‹å¥½åº¦ vs äº§å“è¶…é¢æ”¶ç›Šçš„RÂ² = 0.039ï¼ˆåªè§£é‡Šçº¦4%ï¼‰\n- åŠ å…¥æ³¢åŠ¨ç‡åç»¼åˆRÂ²ä»ç„¶å¾ˆä½ï¼Œä½†åŸå› æ˜¯**æ•°æ®è¦†ç›–å¤ªçŸ­**ï¼ˆPCAä»…è¦†ç›–92/275å¤©ï¼‰\n- éšç€æ•°æ®ç§¯ç´¯ï¼Œç¯å¢ƒå› å­çš„è§£é‡ŠåŠ›ä¼šé€æ­¥ä¸Šå‡\n\n## PCAæ— æ³•è¦†ç›–çš„å…¶ä»–ç»´åº¦\n\n1. **å›æ’¤è·¯å¾„ / è¶‹åŠ¿çº¿æ€§åº¦**\n   - åŒæ ·æ¶¨10%ï¼Œä¸€è·¯æ¶¨å’Œæ¶¨15%å†å›å5%ï¼Œå¯¹è¶‹åŠ¿ç­–ç•¥çš„æŸè€—å®Œå…¨ä¸åŒ\n   - å¯ä»¥ç”¨PC1å¾—åˆ†åºåˆ—çš„è‡ªç›¸å…³æ¥è¡¥å……\n\n2. **ç®¡ç†äººæ‹©æ—¶é¢‘ç‡**\n   - ä¸­çŸ­å‘¨æœŸCTAæ¢æ‰‹ç‡è¿œé«˜äºé•¿å‘¨æœŸ\n   - éœ‡è¡å¸‚é¢‘ç¹æ­¢æŸæ˜¯äºæŸä¸»è¦æ¥æº\n   - PCAåªè¯´\"ç¯å¢ƒå·®\"ï¼Œä¸è¯´\"å·®åˆ°ä»€ä¹ˆç¨‹åº¦è§¦å‘å¤šå°‘æ­¢æŸ\"\n\n3. **æœŸé™ç»“æ„ / carry**ï¼ˆéœ€è¦æ–°æ•°æ®ï¼‰\n   - Backç»“æ„=ç©ºå¤´æœ‰carryæ”¶ç›Šï¼ŒContango=å¤šå¤´æœ‰carryæˆæœ¬\n   - è¿™æ˜¯è¶‹åŠ¿ç­–ç•¥çš„éšæ€§æ”¶ç›Š/æˆæœ¬æ¥æº\n\n## æ³¢åŠ¨ç‡å› å­çš„å®ç°\n\n- ä»ç°æœ‰ `fut_daily.csv` ç›´æ¥è®¡ç®—ï¼Œä¸éœ€è¦æ–°æ•°æ®æº\n- å…¨å¸‚åœºç­‰æƒå¹³å‡20æ—¥å¹´åŒ–æ³¢åŠ¨ç‡\n- 120æ—¥å†å²åˆ†ä½æ•°åšregimeåˆ†ç±»\n- ä½œä¸ºç¬¬äºŒä¸ªç¯å¢ƒå› å­ä¸PCAå‹å¥½åº¦ä¸€èµ·åšä¸¤æ­¥OLSå›å½’\n\n## Roniçš„å…³æ³¨ç‚¹\n\nRonié—®\"PCAèƒ½å¦è§£é‡Šæ¶¨å¹…\" â€” è¿™è¯´æ˜ä»–åœ¨æ€è€ƒå› å­çš„**å……åˆ†æ€§**ï¼Œä¸åªæ˜¯å¿…è¦æ€§ã€‚å¥½çš„FOFåˆ†æåº”è¯¥èƒ½å›ç­”\"ä¸ºä»€ä¹ˆè¿™æ®µæ—¶é—´äº§å“èµšé’±/äºé’±\"ï¼Œå•ä¸€å› å­ä¸å¤Ÿã€‚\n\n---\n\n*æ³¢åŠ¨ç‡æ˜¯è¶‹åŠ¿ç­–ç•¥çš„æ”¾å¤§å™¨ï¼ŒPCAæ˜¯æ–¹å‘çš„è¿‡æ»¤å™¨ã€‚ä¸¤è€…ç¼ºä¸€ä¸å¯ã€‚*\n"}, {"name": "2026-03-01 é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶", "path": "sessions/2026-03-01_é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶.md", "category": "sessions", "content": "# 2026-03-01 é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶\n\n**æ—¥æœŸï¼š** 2026å¹´3æœˆ1æ—¥\n**ä¸»é¢˜ï¼š** é‡åŒ–å®½åŸºè¶…é¢ç¯å¢ƒè¯Šæ–­æ¡†æ¶è®¾è®¡\n**èƒŒæ™¯ï¼š** ä»\"çœ‹æ¿åŸºç¡€æ¨¡å—æ­å»º\"è¿›å…¥\"æ¨¡å—é—´é€»è¾‘ä¸²è”\"é˜¶æ®µ\n\n---\n\n## å¯¹è¯è¿‡ç¨‹\n\n### èµ·ç‚¹\nEvaæå‡ºé‡åŒ–è¶…é¢ç¯å¢ƒçš„å¤šå› å­æ–¹æ¡ˆï¼Œåˆç‰ˆæ˜¯å¹³è¡ŒåŠ æƒã€‚\n\n### Roniçš„å…³é”®ä¿®æ­£\n1. **\"åŸºå·®æ˜¯ç»“æœä¸æ˜¯åŸå› \"** â€” æ¨ç¿»äº†åŸºå·®ä½œä¸ºæ ¸å¿ƒé©±åŠ¨çš„å®šä½ï¼Œé™çº§ä¸ºä¿®æ­£é¡¹\n2. **\"å‡æ°´æ—¶è¶…é¢åè€Œéš¾åš\"** â€” åç›´è§‰æ´å¯Ÿï¼Œå› ä¸ºå‡æ°´å¾€å¾€ä¼´éšå¤§ç¥¨è™¹å¸\n3. **\"ç¦»æ•£åº¦å’Œé›†ä¸­åº¦æ˜¯äº¤äº’é¡¹\"** â€” ä¸èƒ½ç®€å•åŠ æƒï¼Œå¿…é¡»çœ‹ç»„åˆ\n4. **\"ç¨³å®šæ”¾é‡ > è„‰å†²æ”¾é‡ï¼Œç”¨CVè¡¡é‡\"** â€” æµåŠ¨æ€§çš„è´¨é‡æ¯”æ•°é‡é‡è¦\n\n### æœ€ç»ˆæ¡†æ¶\n**5å› å­åµŒå¥—ç»“æ„ï¼š**\n```\næµåŠ¨æ€§(å‰ææ¡ä»¶)\n  â†’ ç¦»æ•£åº¦ Ã— é£æ ¼é›†ä¸­åº¦(äº¤äº’é¡¹ï¼Œæ ¸å¿ƒ)\n    â†’ åŸºå·®æƒ…ç»ª(ä¿®æ­£)\n      â†’ å¾®è§‚ç»“æ„(å°¾éƒ¨é£é™©)\n```\n\nä¸æ˜¯å¹³è¡Œæ‰“åˆ†ï¼Œè€Œæ˜¯å±‚çº§åµŒå¥— â€” æµåŠ¨æ€§ä¸è¾¾æ ‡åˆ™ç›´æ¥é™çº§ã€‚\n\n### ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡\n- æµåŠ¨æ€§æ˜¯å‰æï¼šé‡ä¸å¤Ÿçš„æ—¶å€™ï¼Œå…¶ä»–å› å­å†å¥½ä¹Ÿæ²¡ç”¨ï¼ˆæ»‘ç‚¹åƒæ‰alphaï¼‰\n- ç¦»æ•£åº¦Ã—é›†ä¸­åº¦æ˜¯æ ¸å¿ƒï¼šè¿™å†³å®šäº†alphaçš„\"å¯è·å–æ€§\"\n- åŸºå·®æ˜¯æ¸©åº¦è®¡ä¸æ˜¯å‘åŠ¨æœºï¼šå‘Šè¯‰ä½ å¸‚åœºå¤šçƒ­ï¼Œä½†çƒ­ä¸ç­‰äºå¥½\n- å¾®è§‚ç»“æ„å…œåº•ï¼šæç«¯æ‹¥æŒ¤/è¸©è¸æ—¶ä¸€ç¥¨å¦å†³\n\n## å…³è”æ¦‚å¿µ\n- [[ç¦»æ•£åº¦]]\n- [[é£æ ¼é›†ä¸­åº¦]]\n- [[åŸºå·®æƒ…ç»ª]]\n- [[é‡åŒ–å®½åŸºè¶…é¢ç¯å¢ƒ]]\n\n**æ ‡ç­¾ï¼š** #ä¼šè¯è®°å½• #é‡åŒ– #æ¡†æ¶è®¾è®¡ #2026-03\n"}, {"name": "2026-03-01 å¼ºåŠ¿è‚¡æ¨¡å—è®¨è®º", "path": "sessions/2026-03-01_å¼ºåŠ¿è‚¡æ¨¡å—è®¨è®º.md", "category": "sessions", "content": "# 2026-03-01 å¼ºåŠ¿è‚¡æ¨¡å—è®¨è®º\n\n**æ—¥æœŸï¼š** 2026å¹´3æœˆ1æ—¥\n**ä¸»é¢˜ï¼š** å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…æ¨¡å—çš„æƒ…ç»ªé‡åŒ–é—®é¢˜\n\n---\n\n## å¯¹è¯è¿‡ç¨‹\n\n### Evaçš„æ–¹æ¡ˆ\nç”¨æ¶¨è·Œåœå®¶æ•°ã€è¿æ¿é«˜åº¦ã€æˆäº¤é¢ç­‰æŒ‡æ ‡æ„å»ºæƒ…ç»ªè¯„åˆ†ã€‚\n\n### Roniçš„æŒ‘æˆ˜\n> \"æƒ…ç»ªé‡åŒ–æ€ä¹ˆç•Œå®šï¼Ÿå°±åƒé‡åŒ–äº¤æ˜“ä¸€æ ·ï¼Œå‚æ•°çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ\"\n\næ ¸å¿ƒé—®é¢˜ï¼š\n- ä»€ä¹ˆç®—\"æƒ…ç»ªé«˜\"ï¼Ÿæ¶¨åœ50å®¶ç®—é«˜è¿˜æ˜¯100å®¶ç®—é«˜ï¼Ÿ\n- é˜ˆå€¼æ˜¯å›ºå®šçš„è¿˜æ˜¯åº”è¯¥éšå¸‚åœºregimeå˜åŒ–ï¼Ÿ\n- å¦‚æœæœªæ¥å¸‚åœºç»“æ„å˜äº†ï¼ˆæ¯”å¦‚æ³¨å†Œåˆ¶æ‰©å®¹åæ¶¨åœå®¶æ•°åŸºå‡†å˜äº†ï¼‰ï¼Œç°åœ¨è®¾çš„å‚æ•°è¿˜æœ‰æ²¡æœ‰æ„ä¹‰ï¼Ÿ\n\n### æš‚æ—¶çš„è§£å†³æ€è·¯\n- ç”¨æ»šåŠ¨åˆ†ä½æ•°è€Œéå›ºå®šé˜ˆå€¼ï¼ˆè‡ªé€‚åº”ï¼‰\n- è®°å½•æ¯ä¸ªå‚æ•°\"ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾\" â†’ å¸‚åœºå˜åŒ–æ—¶æœ‰æ®å¯æŸ¥\n- è¿™ä¸ªé—®é¢˜æ²¡æœ‰å®Œå…¨è§£å†³ï¼Œæ˜¯ä¸€ä¸ªæŒç»­æ€è€ƒçš„æ–¹å‘\n\n## æ ¸å¿ƒæ•™è®­\n**å‚æ•°è®¾è®¡å¿…é¡»ç•™ç—•ã€‚** ä¸æ˜¯è®°ä½å‚æ•°æ˜¯å¤šå°‘ï¼Œè€Œæ˜¯è®°ä½\"å½“æ—¶ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªå€¼\"ã€‚å¸‚åœºä¼šå˜ï¼Œå‚æ•°ä¼šè°ƒï¼Œä½†å†³ç­–é€»è¾‘åº”è¯¥å¯è¿½æº¯ã€‚\n\n## å…³è”\n- [[æƒ…ç»ªé‡åŒ–]]\n- [[å¼ºåŠ¿è‚¡ç¯å¢ƒé€‚é…]]\n\n**æ ‡ç­¾ï¼š** #ä¼šè¯è®°å½• #å¼ºåŠ¿è‚¡ #æ–¹æ³•è®º #2026-03\n"}, {"name": "2026-03-01 å•†å“CTA PCAæ¨¡å—è®¨è®º", "path": "sessions/2026-03-01_å•†å“CTA_PCAæ¨¡å—è®¨è®º.md", "category": "sessions", "content": "# 2026-03-01 å•†å“CTA PCAæ¨¡å—è®¨è®º\n\n> å‚ä¸è€…ï¼šRoni Ã— Eva\n\n## è®¨è®ºè¦ç‚¹\n\n1. **Roni æå‡ºç”¨ PCA æ›¿ä»£ä¼ ç»Ÿ CTA ç¯å¢ƒæŒ‡æ ‡**\n   - èµ·å› ï¼šè®¤ä¸ºå•†å“æŒ‡æ•°é•¿æœŸä½å¤æ™®ã€ç†Šé•¿ç‰›çŸ­ï¼Œæµ·å¤– hedge fund ç”¨è¶‹åŠ¿è·Ÿè¸ª\n   - é—®é¢˜ï¼šå¯¹æ‰€æœ‰æ´»è·ƒå“ç§çš„ç­‰æƒæ—¥æ”¶ç›Šç‡åš PCAï¼Œèƒ½å¦ä»£è¡¨å•†å“å¸‚åœºçš„åŠ¨é‡æˆ–åè½¬ï¼Ÿ\n\n2. **Eva åˆ†æ PCA åœ¨ CTA è¯­å¢ƒä¸‹çš„é€‚ç”¨æ€§**\n   - PC1 æ–¹å·®è§£é‡Šæ¯” = å“ç§å…±æŒ¯å¼ºåº¦ = CTA è¶‹åŠ¿è·Ÿè¸ªç›ˆåˆ©çš„ç›´æ¥æ¡ä»¶\n   - PC1+PC2 è”åˆçœ‹ï¼šå•ä¸€è¶‹åŠ¿ vs åŒé˜µè¥å¯¹æŠ— vs å…¨å¸‚åœºéœ‡è¡\n   - æ¯”ä¼ ç»Ÿ mod1ï¼ˆå›ºå®šæƒé‡åŠ æƒï¼‰æ›´å®¢è§‚ï¼Œå› æœé“¾æ›´å¹²å‡€\n\n3. **æ¶æ„å†³ç­–ï¼šæ–°è€å¹¶å­˜ï¼ŒæŠ˜å å±•ç¤º**\n   - åŸ mod1ï¼ˆCTAå‹å¥½åº¦ï¼‰â†’ å¯æŠ˜å ï¼Œé»˜è®¤æ”¶èµ·\n   - åŸ mod2ï¼ˆå“ç§è¶‹åŠ¿æ‰«æï¼‰â†’ å¯æŠ˜å ï¼Œé»˜è®¤æ”¶èµ·\n   - æ–° mod1bï¼ˆPCAæ ¸å¿ƒå¼•æ“ï¼‰â†’ é»˜è®¤å±•å¼€ï¼Œä¸»è§’\n   - æ–° mod2bï¼ˆPCA Loadingå¢å¼ºï¼‰â†’ é»˜è®¤å±•å¼€ï¼Œä¸»è§’\n   - mod3 å®è§‚æ¯”ä»·ä¸åŠ¨\n\n4. **Roni çš„å…³é”®åˆ¤æ–­**\n   - \"æ¶¨è·Œå¹…æˆ‘æ›´å¥½ç†è§£æ‰€ä»¥ä¿ç•™ï¼Œä½†ä»æ•°å­¦è§’åº¦æ–°æ¨¡å—æ›´å¥½è§£é‡Šé‡åŒ– CTA ç¯å¢ƒ\"\n   - ä¿ç•™æ—§æ¨¡å—æ˜¯ä¸ºäº†ç›´è§‰è¾…åŠ©ï¼Œæ–°æ¨¡å—æ˜¯å®šé‡ä¸»è§’\n\n## äº§å‡º\n\n- `mod1b_pca_engine.py` â€” æ»šåŠ¨PCA + ç¯å¢ƒç±»å‹ + å‹å¥½åº¦\n- `mod2b_pca_loading.py` â€” Loadingå¢å¼ºå“ç§æ‰«æ + æ¿å—ä¸€è‡´æ€§\n- çŸ¥è¯†åº“ç¬”è®°ï¼š`concepts/å•†å“CTA_PCAç¯å¢ƒè¯Šæ–­.md`\n\n## é¦–æ¬¡è¿è¡Œç»“æœï¼ˆ2026-02-27æ•°æ®ï¼‰\n\n- PC1 è§£é‡Šæ¯” 29.3%ï¼ˆæ¸©å’Œè¶‹åŠ¿ï¼‰\n- PC2 è§£é‡Šæ¯” 9.5%ï¼ˆåˆ†åŒ–ä¸ä¸¥é‡ï¼‰\n- åˆ†åŒ–è½´ï¼šé»‘è‰²ç³» vs èƒ½æºåŒ–å·¥\n- PCAå‹å¥½åº¦ 40.8ï¼ˆä¸­ç­‰åä½ï¼‰\n- èƒ½æºåŒ–å·¥æ¿å— loading æœ€é«˜ï¼Œé©±åŠ¨å¸‚åœºèŠ‚å¥\n- è´µé‡‘å±ä¸€è‡´æ€§æœ€é«˜ï¼ˆ0.96ï¼‰\n"}, {"name": "2026-03-01 CTAå½’å› ä¸æ³¢åŠ¨ç‡è®¨è®º", "path": "sessions/2026-03-01_CTAå½’å› ä¸æ³¢åŠ¨ç‡è®¨è®º.md", "category": "sessions", "content": "# CTAäº§å“å½’å› ä¸æ³¢åŠ¨ç‡è®¨è®º\n\n**æ—¥æœŸï¼š** 2026-03-01\n**æ ‡ç­¾ï¼š** #CTA #å½’å›  #æ³¢åŠ¨ç‡ #PCA #è®¨è®º\n**å…³è”ï¼š** [[CTAæ³¢åŠ¨ç‡å› å­ä¸å½’å› ]] [[å•†å“CTA_PCAç¯å¢ƒè¯Šæ–­]]\n\n---\n\n## èƒŒæ™¯\n\nå®ŒæˆPCAæ¨¡å—åï¼ŒRoniè¦æ±‚åšCTAäº§å“çš„æ”¶ç›Šå½’å› ï¼ˆå‚ç…§å¼ºåŠ¿è‚¡æ¿å—å·²æœ‰çš„å½’å› æ¡†æ¶ï¼‰ï¼ŒåŸºå‡†ä¸ºå—åå•†å“æŒ‡æ•°ã€‚\n\n## å…³é”®å‘ç°\n\n### Betaå‡ ä¹ä¸ºé›¶æ˜¯æ­£ç¡®çš„\n- äº§å“ vs å—åå•†å“ç›¸å…³ç³»æ•° = 0.10ï¼ŒÎ² â‰ˆ 0.01\n- è¿™å®Œå…¨åˆç†ï¼šé‡åŒ–ä¸­çŸ­å‘¨æœŸè¶‹åŠ¿CTAåšå¤šç©ºæ‹©æ—¶ï¼Œä¸æ˜¯å•†å“å¤šå¤´\n- Betaè´¡çŒ®ä»…+0.93%ï¼Œè¯´æ˜äº§å“æ”¶ç›Šå‡ ä¹ä¸æ¥è‡ª\"å•†å“æ¶¨äº†\"\n\n### PCAå•å› å­è§£é‡ŠåŠ›ä¸è¶³\n- RÂ² = 0.039ï¼Œåªèƒ½è§£é‡Šçº¦4%çš„è¶…é¢æ”¶ç›Šå˜åŠ¨\n- åŸå› ï¼šPCAåªæŠ“äº†\"è¶‹åŠ¿æŒç»­æ€§\"ï¼Œæ²¡æŠ“\"æ³¢åŠ¨ç‡æ°´å¹³\"\n- Evaæå‡ºï¼š**æ”¶ç›Š â‰ˆ æ³¢åŠ¨ç‡ Ã— è¶‹åŠ¿æŒç»­æ€§ Ã— ä»“ä½**ï¼ŒPCAåªæ˜¯å…¶ä¸­ä¸€é¡¹\n\n### æ³¢åŠ¨ç‡å› å­è¡¥å……\n- Roniå†³å®šåŠ å…¥å…¨å¸‚åœºå¹³å‡æ³¢åŠ¨ç‡ä½œä¸ºç¬¬äºŒç¯å¢ƒå› å­\n- æ³¢åŠ¨ç‡RÂ² = 0.005ï¼ˆæ›´å¼±ï¼‰ï¼Œä½†æ–¹å‘æ­£ç¡®\n- ç›®å‰æ•°æ®è¦†ç›–å¤ªçŸ­ï¼ˆPCAä»…92å¤©ï¼‰ï¼Œè§£é‡ŠåŠ›ä¼šéšç§¯ç´¯æå‡\n\n## Roniçš„æ€ç»´æ–¹å¼\n\nRoniåœ¨é—®\"PCAèƒ½å¦è§£é‡Šæ¶¨å¹…\"æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨è´¨ç–‘å› å­çš„**å……åˆ†æ€§** â€” ä½œä¸ºFOFï¼Œä»–éœ€è¦èƒ½å‘æŠ•èµ„äººè§£é‡Š\"ä¸ºä»€ä¹ˆè¿™æ®µæ—¶é—´èµšäº†/äºäº†\"ã€‚è¿™æ˜¯ä»è¯„ä¼°ç»´åº¦å‡çº§åˆ°å½’å› ç»´åº¦çš„æ€è€ƒã€‚\n\n## æŠ€æœ¯å†³ç­–\n\n- 4å› å­å½’å› ï¼šBeta + PCAç¯å¢ƒ + æ³¢åŠ¨ç‡ç¯å¢ƒ + Alpha\n- å‰ç«¯å¸ƒå±€ï¼šäº§å“å‡€å€¼å›¾ â†’ å½’å› æ‹†è§£ â†’ æ³¢åŠ¨ç‡ç‹¬ç«‹å›¾ â†’ PCAèµ°åŠ¿\n- æ ¼å¼å‚ç…§å¼ºåŠ¿è‚¡æ¿å—ï¼ˆRoniæ˜ç¡®è¦æ±‚ï¼‰\n\n---\n\n*ä»\"ç¯å¢ƒå¥½ä¸å¥½\"åˆ°\"äº§å“ä¸ºä»€ä¹ˆèµšé’±\"ï¼Œæ˜¯FOFåˆ†æçš„è‡ªç„¶è¿›åŒ–ã€‚*\n"}, {"name": "äº”å› å­åµŒå¥—è€Œéå¹³è¡Œ", "path": "decisions/2026-03-01_äº”å› å­åµŒå¥—è€Œéå¹³è¡Œ.md", "category": "decisions", "content": "# å†³ç­–ï¼šäº”å› å­ç”¨åµŒå¥—ç»“æ„è€Œéå¹³è¡ŒåŠ æƒ\n\n**æ—¥æœŸï¼š** 2026-03-01\n**æ¨¡å—ï¼š** é‡åŒ–å®½åŸºè¶…é¢ç¯å¢ƒï¼ˆ`env_fit/quant_stock/`ï¼‰\n\n---\n\n## å†³ç­–å†…å®¹\né‡åŒ–è¶…é¢ç¯å¢ƒçš„5ä¸ªå› å­é‡‡ç”¨**åµŒå¥—å±‚çº§**ç»“æ„ï¼Œè€Œéä¼ ç»Ÿçš„å¹³è¡ŒåŠ æƒæ‰“åˆ†ã€‚\n\n## å¤‡é€‰æ–¹æ¡ˆ\n1. ~~å¹³è¡ŒåŠ æƒ~~ â€” 5å› å­å„æ‰“åˆ†ï¼ŒåŠ æƒå¹³å‡ â†’ è¢«å¦å†³\n2. âœ… åµŒå¥—å±‚çº§ â€” æµåŠ¨æ€§â†’ç¦»æ•£åº¦Ã—é›†ä¸­åº¦â†’åŸºå·®â†’å¾®è§‚\n\n## ä¸ºä»€ä¹ˆé€‰åµŒå¥—\n**Roniçš„é€»è¾‘ï¼š**\n- å› å­ä¹‹é—´ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œæœ‰å‰ææ¡ä»¶å…³ç³»\n- æµåŠ¨æ€§ä¸å¤Ÿæ—¶ï¼Œç¦»æ•£åº¦å†é«˜ä¹Ÿæ²¡ç”¨ï¼ˆä½ é€‰åˆ°äº†alphaè‚¡ä½†ä¹°ä¸è¿›å»ï¼‰\n- ç¦»æ•£åº¦å’Œé›†ä¸­åº¦å¿…é¡»äº¤å‰çœ‹ï¼Œä¸èƒ½åˆ†å¼€æ‰“åˆ†\n- å¹³è¡ŒåŠ æƒä¼šæ©ç›–\"ä¸€ç¥¨å¦å†³\"å‹é£é™©\n\n**ç±»æ¯”ï¼š** å°±åƒä½“æ£€ï¼Œä¸æ˜¯æ¯é¡¹æŒ‡æ ‡å¹³å‡åˆ†é«˜å°±å¥åº·ã€‚è¡€å‹200ï¼Œå…¶ä»–å†å¥½ä¹Ÿå¾—ä½é™¢ã€‚\n\n## å½±å“\n- `quant_stock_data.py` çš„è®¡ç®—é€»è¾‘æŒ‰åµŒå¥—è®¾è®¡\n- å‰ç«¯å±•ç¤ºä¸æ˜¯ç®€å•çš„æ€»åˆ†ï¼Œè€Œæ˜¯å±‚çº§åˆ¤æ–­æ ‘\n- è®¾è®¡æ–‡æ¡£ï¼š`README_design.md`\n\n## å…³è”\n- [[2026-03-01_é‡åŒ–è¶…é¢äº”å› å­æ¡†æ¶]]\n- [[ç¦»æ•£åº¦]]\n- [[é£æ ¼é›†ä¸­åº¦]]\n\n**æ ‡ç­¾ï¼š** #å†³ç­– #é‡åŒ– #æ¶æ„é€‰æ‹©\n"}];
const NOTES = {};
let currentNote = null;
let history = [];
let editing = false;

// === localStorage persistence ===
function loadUserData() {
  try { return JSON.parse(localStorage.getItem('smartnotes_user') || '{}'); }
  catch(e) { return {}; }
}
function saveUserData(data) {
  localStorage.setItem('smartnotes_user', JSON.stringify(data));
}

function loadNotes() {
  const userData = loadUserData();
  // Load builtins
  for (const entry of BUILTIN_NOTES) {
    const id = entry.path.replace(/\.md$/, '');
    const content = userData[id]?.content || entry.content;
    parseNote(id, entry.path, entry.category, entry.name, content);
  }
  // Load user-created notes
  if (userData._created) {
    for (const entry of userData._created) {
      const id = entry.path.replace(/\.md$/, '');
      if (!NOTES[id]) parseNote(id, entry.path, entry.category, entry.name, entry.content);
    }
  }
  renderNav();
  showWelcome();
}

function parseNote(id, path, category, name, content) {
  const title = content.match(/^#\s+(.+)$/m)?.[1] || name;
  const tags = [...content.matchAll(/#(\S+)/g)].map(m => m[1]).filter(t => !t.startsWith('#'));
  const links = [...content.matchAll(/\[\[([^\]]+)\]\]/g)].map(m => m[1]);
  NOTES[id] = { id, title, path, category, content, tags, links, name };
}

// === Navigation ===
function renderNav(filter) {
  const nav = document.getElementById('navSection');
  const cats = { concepts: 'ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ', sessions: 'ğŸ’¬ å¯¹è¯è®°å½•', decisions: 'âš–ï¸ å†³ç­–è®°å½•' };
  let html = '';
  for (const [cat, label] of Object.entries(cats)) {
    const ns = Object.values(NOTES).filter(n => n.category === cat &&
      (!filter || n.title.toLowerCase().includes(filter) || n.content.toLowerCase().includes(filter)));
    if (!ns.length) continue;
    html += '<div class="nav-group"><div class="nav-group-title">' + label + '</div>';
    ns.forEach(n => {
      html += '<div class="nav-item ' + (currentNote?.id===n.id?'active':'') + '" onclick="openNote(\'' + n.id + '\')">'
        + '<span class="icon">' + (cat==='concepts'?'â—†':cat==='sessions'?'â—‡':'â–¸') + '</span>' + n.title + '</div>';
    });
    html += '</div>';
  }
  nav.innerHTML = html || '<div style="padding:20px;color:var(--text3);font-size:13px;">æ— åŒ¹é…ç»“æœ</div>';
}

// === Note Rendering ===
function openNote(id) {
  const note = NOTES[id] || Object.values(NOTES).find(n => n.title === id);
  if (!note) return;
  if (currentNote) history.push(currentNote.id);
  currentNote = note;
  editing = false;
  renderNote(note);
  renderNav();
  document.getElementById('breadcrumb').innerHTML = '<span>' + ({concepts:'æ¦‚å¿µ',sessions:'å¯¹è¯',decisions:'å†³ç­–'}[note.category]||'') + '</span> / ' + note.title;
  document.getElementById('btnEdit').style.display = '';
  document.getElementById('btnDelete').style.display = '';
}

function renderNote(note) {
  const area = document.getElementById('contentArea');
  area.style.display = 'block';
  document.getElementById('graphCanvas').style.display = 'none';
  document.getElementById('btnNotes').classList.add('active');
  document.getElementById('btnGraph').classList.remove('active');
  document.getElementById('btnEdit').textContent = 'âœï¸ ç¼–è¾‘';

  let body = note.content
    .replace(/^#\s+.+$/m, '')
    .replace(/\|(.+)\|/g, function(line) { return line; })
    .replace(/^###\s+(.+)$/gm, '<h3>$1</h3>')
    .replace(/^##\s+(.+)$/gm, '<h2>$1</h2>')
    .replace(/^>\s*(.+)$/gm, '<blockquote>$1</blockquote>')
    .replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>')
    .replace(/`([^`]+)`/g, '<code>$1</code>')
    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
    .replace(/\*(.+?)\*/g, '<em>$1</em>')
    .replace(/~~(.+?)~~/g, '<del>$1</del>')
    .replace(/^- (.+)$/gm, '<li>$1</li>')
    .replace(/\[\[([^\]]+)\]\]/g, function(_, name) {
      const t = Object.values(NOTES).find(n => n.title===name || n.id.endsWith('/'+name) || n.id.includes(name));
      return t ? '<a class="wiki-link" onclick="openNote(\''+t.id+'\')">'+name+'</a>'
               : '<a class="wiki-link broken">'+name+'</a>';
    })
    .replace(/#(\S+)/g, '<span class="tag" onclick="searchTag(\'$1\')">#$1</span>');

  body = body.replace(/<\/blockquote>\s*<blockquote>/g, '<br>');
  body = body.split('\n').map(function(line) {
    var t = line.trim();
    if (!t) return '';
    if (t.startsWith('<')) return t;
    return '<p>'+t+'</p>';
  }).join('\n');

  // Backlinks
  var bl = Object.values(NOTES).filter(function(n) {
    return n.links.some(function(l) {
      var t = Object.values(NOTES).find(function(x){ return x.title===l || x.id.endsWith('/'+l) || x.id.includes(l); });
      return t && t.id === note.id;
    });
  });
  var blHtml = '';
  if (bl.length) {
    blHtml = '<div class="backlinks"><h3>ğŸ”— åå‘é“¾æ¥ ('+bl.length+')</h3>';
    bl.forEach(function(b) {
      blHtml += '<div class="backlink-item" onclick="openNote(\''+b.id+'\')"><div>'+b.title+'</div></div>';
    });
    blHtml += '</div>';
  }
  area.innerHTML = '<div class="note-title">'+note.title+'</div><div class="note-body">'+body+'</div>'+blHtml;
}

// === Edit ===
function toggleEdit() {
  if (!currentNote) return;
  editing = !editing;
  var area = document.getElementById('contentArea');
  var btn = document.getElementById('btnEdit');
  if (editing) {
    btn.textContent = 'ğŸ’¾ ä¿å­˜';
    area.innerHTML = '<textarea class="editor-area" id="editorTA">'+currentNote.content.replace(/</g,'&lt;')+'</textarea>';
    document.getElementById('editorTA').focus();
  } else {
    var ta = document.getElementById('editorTA');
    if (ta) {
      var newContent = ta.value;
      currentNote.content = newContent;
      // Re-parse
      parseNote(currentNote.id, currentNote.path, currentNote.category, currentNote.name, newContent);
      // Save to localStorage
      var ud = loadUserData();
      // Check if user-created
      var isCreated = ud._created && ud._created.some(function(e){ return e.path === currentNote.path; });
      if (isCreated) {
        ud._created = ud._created.map(function(e){ return e.path===currentNote.path ? Object.assign(e,{content:newContent}) : e; });
      } else {
        ud[currentNote.id] = { content: newContent };
      }
      saveUserData(ud);
      // Also save to notes/ folder file (for git sync) â€” only works via http server
      // For file:// mode, localStorage is the persistence layer
    }
    btn.textContent = 'âœï¸ ç¼–è¾‘';
    openNote(currentNote.id);
  }
}

// === New Note ===
function newNote() {
  editing = true;
  currentNote = null;
  document.getElementById('btnEdit').style.display = '';
  document.getElementById('btnEdit').textContent = 'ğŸ’¾ ä¿å­˜';
  document.getElementById('btnDelete').style.display = 'none';
  var area = document.getElementById('contentArea');
  area.innerHTML = '<div class="editor-bar">'
    + '<select id="newCat"><option value="concepts">ğŸ’¡ æ¦‚å¿µ</option><option value="sessions">ğŸ’¬ å¯¹è¯</option><option value="decisions">âš–ï¸ å†³ç­–</option></select>'
    + '<input id="newName" placeholder="ç¬”è®°æ ‡é¢˜...">'
    + '</div>'
    + '<textarea class="editor-area" id="editorTA"># æ–°ç¬”è®°æ ‡é¢˜\n\nåœ¨è¿™é‡Œå†™å†…å®¹...\n\n**æ ‡ç­¾ï¼š** #æ ‡ç­¾</textarea>';
  document.getElementById('newName').focus();
  document.getElementById('btnEdit').onclick = function() {
    var name = document.getElementById('newName').value.trim();
    var cat = document.getElementById('newCat').value;
    var content = document.getElementById('editorTA').value;
    if (!name) { alert('è¯·è¾“å…¥æ ‡é¢˜'); return; }
    var path = cat + '/' + name.replace(/\s+/g, '_') + '.md';
    var id = path.replace(/\.md$/, '');
    parseNote(id, path, cat, name, content);
    // Save
    var ud = loadUserData();
    if (!ud._created) ud._created = [];
    ud._created.push({ name: name, path: path, category: cat, content: content });
    saveUserData(ud);
    editing = false;
    document.getElementById('btnEdit').onclick = function(){ toggleEdit(); };
    renderNav();
    openNote(id);
  };
}

// === Delete ===
function deleteNote() {
  if (!currentNote) return;
  if (!confirm('ç¡®å®šåˆ é™¤ "'+currentNote.title+'" ï¼Ÿ')) return;
  var ud = loadUserData();
  // Remove from user-created
  if (ud._created) ud._created = ud._created.filter(function(e){ return e.path !== currentNote.path; });
  // Mark builtin as deleted
  ud[currentNote.id] = { deleted: true };
  saveUserData(ud);
  delete NOTES[currentNote.id];
  currentNote = null;
  editing = false;
  renderNav();
  showWelcome();
  document.getElementById('btnEdit').style.display = 'none';
  document.getElementById('btnDelete').style.display = 'none';
}

// === Search ===
var searchInput = document.getElementById('searchInput');
var searchTimeout;
searchInput.addEventListener('input', function() {
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(function() {
    var q = searchInput.value.trim().toLowerCase();
    if (!q) { renderNav(); if (currentNote) renderNote(currentNote); else showWelcome(); return; }
    showSearchResults(q);
  }, 200);
});

function showSearchResults(query) {
  var area = document.getElementById('contentArea');
  var results = Object.values(NOTES).filter(function(n) {
    return n.title.toLowerCase().includes(query) || n.content.toLowerCase().includes(query);
  }).map(function(n) {
    var lines = n.content.split('\n').filter(function(l){ return l.toLowerCase().includes(query); });
    var snippet = lines.slice(0,2).join(' ').substring(0,200);
    var re = new RegExp(query, 'gi');
    return { note: n, snippet: snippet.replace(re, function(m){ return '<mark>'+m+'</mark>'; }) };
  });
  area.innerHTML = '<div class="search-results"><h3 style="color:var(--text3);margin-bottom:16px">æœç´¢ "'+query+'" â€” '+results.length+' æ¡ç»“æœ</h3>'
    + results.map(function(r){ return '<div class="search-result" onclick="openNote(\''+r.note.id+'\');searchInput.value=\'\'"><div class="title">'+r.note.title+'</div><div class="snippet">'+r.snippet+'</div></div>'; }).join('')
    + '</div>';
  renderNav(query);
}

function searchTag(tag) { searchInput.value = tag; showSearchResults(tag.toLowerCase()); }

function showWelcome() {
  document.getElementById('contentArea').innerHTML = '<div class="welcome"><h2>GAMT æŠ•ç ”çŸ¥è¯†åº“</h2><p>è®°å½•æ¯ä¸€æ¬¡å¯¹è¯çš„æ´å¯Ÿã€æ¯ä¸€ä¸ªå‚æ•°èƒŒåçš„"ä¸ºä»€ä¹ˆ"ã€‚</p>'
    + '<p style="margin-top:12px;font-size:13px">å…± <b>'+Object.keys(NOTES).length+'</b> ç¯‡ç¬”è®° Â· ç‚¹å‡»å·¦ä¾§æµè§ˆ Â· âœï¸ å¯ç¼–è¾‘ Â· ï¼‹ å¯æ–°å»º</p>'
    + '<div class="shortcuts"><div class="shortcut"><kbd>âŒ˜K</kbd> æœç´¢</div><div class="shortcut"><kbd>â†</kbd> è¿”å›</div></div></div>';
}

// === Graph View ===
function switchView(view) {
  if (view==='graph') {
    document.getElementById('contentArea').style.display = 'none';
    document.getElementById('graphCanvas').style.display = 'block';
    document.getElementById('btnGraph').classList.add('active');
    document.getElementById('btnNotes').classList.remove('active');
    drawGraph();
  } else {
    document.getElementById('contentArea').style.display = 'block';
    document.getElementById('graphCanvas').style.display = 'none';
    document.getElementById('btnNotes').classList.add('active');
    document.getElementById('btnGraph').classList.remove('active');
  }
}

function drawGraph() {
  var canvas = document.getElementById('graphCanvas');
  var rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width*2; canvas.height = rect.height*2;
  canvas.style.width = rect.width+'px'; canvas.style.height = rect.height+'px';
  var ctx = canvas.getContext('2d'); ctx.scale(2,2);
  var notes = Object.values(NOTES); if (!notes.length) return;
  var nodes = notes.map(function(n){ return {id:n.id,title:n.title,category:n.category,x:rect.width/2+(Math.random()-.5)*300,y:rect.height/2+(Math.random()-.5)*200,vx:0,vy:0}; });
  var nodeMap={}; nodes.forEach(function(n){nodeMap[n.id]=n;});
  var edges=[]; notes.forEach(function(note){ note.links.forEach(function(link){
    var t=notes.find(function(n){return n.title===link||n.id.endsWith('/'+link)||n.id.includes(link);});
    if(t) edges.push({source:note.id,target:t.id});
  }); });
  for(var iter=0;iter<200;iter++){
    for(var i=0;i<nodes.length;i++)for(var j=i+1;j<nodes.length;j++){
      var dx=nodes[j].x-nodes[i].x,dy=nodes[j].y-nodes[i].y,d=Math.sqrt(dx*dx+dy*dy)||1,f=5000/(d*d);
      nodes[i].vx-=dx/d*f;nodes[i].vy-=dy/d*f;nodes[j].vx+=dx/d*f;nodes[j].vy+=dy/d*f;
    }
    edges.forEach(function(e){var s=nodeMap[e.source],t=nodeMap[e.target];if(!s||!t)return;var dx=t.x-s.x,dy=t.y-s.y,d=Math.sqrt(dx*dx+dy*dy)||1,f=(d-120)*.05;s.vx+=dx/d*f;s.vy+=dy/d*f;t.vx-=dx/d*f;t.vy-=dy/d*f;});
    nodes.forEach(function(n){n.vx+=(rect.width/2-n.x)*.01;n.vy+=(rect.height/2-n.y)*.01;n.vx*=.8;n.vy*=.8;n.x+=n.vx;n.y+=n.vy;});
  }
  ctx.strokeStyle='rgba(137,180,250,0.2)';ctx.lineWidth=1;
  edges.forEach(function(e){var s=nodeMap[e.source],t=nodeMap[e.target];if(!s||!t)return;ctx.beginPath();ctx.moveTo(s.x,s.y);ctx.lineTo(t.x,t.y);ctx.stroke();});
  var colors={concepts:'#89b4fa',sessions:'#a6e3a1',decisions:'#f9e2af'};
  nodes.forEach(function(n){var r=n.id===currentNote?.id?8:5;ctx.beginPath();ctx.arc(n.x,n.y,r,0,Math.PI*2);ctx.fillStyle=colors[n.category]||'#cdd6f4';ctx.fill();if(n.id===currentNote?.id){ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.stroke();}ctx.fillStyle='#cdd6f4';ctx.font='11px -apple-system,PingFang SC,sans-serif';ctx.textAlign='center';ctx.fillText(n.title,n.x,n.y+r+14);});
  canvas.onclick=function(e){var cr=canvas.getBoundingClientRect(),x=e.clientX-cr.left,y=e.clientY-cr.top;nodes.forEach(function(n){if(Math.abs(n.x-x)<20&&Math.abs(n.y-y)<20)openNote(n.id);});};
}

// === Keyboard ===
document.addEventListener('keydown', function(e) {
  if ((e.metaKey||e.ctrlKey)&&e.key==='k') { e.preventDefault(); searchInput.focus(); searchInput.select(); }
  if (e.key==='Escape') { searchInput.value=''; searchInput.blur(); renderNav(); }
  if (e.altKey&&e.key==='ArrowLeft'&&history.length) { var prev=history.pop(); currentNote=null; openNote(prev); }
  if ((e.metaKey||e.ctrlKey)&&e.key==='s'&&editing) { e.preventDefault(); toggleEdit(); }
});

// === Init ===
loadNotes();
</script>
</body>
</html>
