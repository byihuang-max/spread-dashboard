<!DOCTYPE html>
<html lang="zh"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>å¢ƒå†…æµåŠ¨æ€§</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,'PingFang SC','Helvetica Neue',sans-serif;background:#f5f6f8;color:#2d3142;padding:20px;font-size:14px}
h2{font-size:16px;font-weight:700;margin-bottom:12px;color:#1e2433}
.section{margin-bottom:28px}
.signal-bar{background:linear-gradient(135deg,#1e2433,#2a3350);border-radius:12px;padding:16px 20px;color:#e2e6ed;display:flex;align-items:center;gap:16px;flex-wrap:wrap;margin-bottom:20px}
.signal-main{font-size:18px;font-weight:800}
.signal-tags{display:flex;gap:8px;flex-wrap:wrap}
.signal-tag{background:rgba(255,255,255,0.1);padding:4px 12px;border-radius:20px;font-size:12px;color:#b8bfce}
.signal-tag.good{background:rgba(34,197,94,0.2);color:#4ade80}
.signal-tag.risk{background:rgba(239,68,68,0.2);color:#f87171}
.signal-tag.warn{background:rgba(245,158,11,0.25);color:#fbbf24}
.chart-box{background:#fff;border-radius:10px;padding:16px;border:1px solid #e8eaef;margin-bottom:16px}
.chart-box h3{font-size:13px;font-weight:700;color:#374151;margin-bottom:12px}
.chart-wrap{position:relative;height:280px}
.chart-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:768px){.chart-row{grid-template-columns:1fr}}
.chart-note{font-size:11px;color:#8b92a5;line-height:1.7;margin-top:10px;padding:10px 12px;background:#f9fafb;border-radius:6px}
.chart-note b{color:#374151}
.loading{text-align:center;padding:60px;color:#8b92a5}
</style>
</head>
<body>
<div class="loading" id="loadingMsg">åŠ è½½ä¸­...</div>
<div id="app" style="display:none">

<div class="signal-bar">
  <div class="signal-main">å¢ƒå†…æµåŠ¨æ€§</div>
  <div class="signal-tags" id="signalTags"></div>
  <div style="margin-left:auto;font-size:11px;color:#7c8598" id="updateTime"></div>
</div>

<div class="chart-row section">
  <div class="chart-box">
    <h3>ğŸ“ ShiboræœŸé™ç»“æ„ï¼ˆå½“æ—¥ vs ä¸€å‘¨å‰ vs ä¸€æœˆå‰ï¼‰</h3>
    <div class="chart-wrap"><canvas id="shiborTermChart"></canvas></div>
    <div class="chart-note">
      <b>æ€ä¹ˆçœ‹ï¼š</b>æ¨ªè½´æ˜¯èµ„é‡‘æœŸé™ï¼ˆéš”å¤œ~1å¹´ï¼‰ï¼Œçºµè½´æ˜¯åˆ©ç‡ã€‚ä¸‰æ¡çº¿åˆ†åˆ«æ˜¯ä»Šå¤©ã€ä¸€å‘¨å‰ã€ä¸€æœˆå‰ã€‚<br>
      <b>æ›²çº¿ä¸‹ç§»ï¼š</b>èµ„é‡‘é¢åœ¨æ”¾æ¾ï¼Œå€Ÿé’±æ›´ä¾¿å®œã€‚<br>
      <b>æ›²çº¿ä¸Šç§»ï¼š</b>èµ„é‡‘é¢æ”¶ç´§ã€‚<br>
      <b>çŸ­ç«¯ä¸‹é•¿ç«¯ä¸Šï¼ˆå˜é™¡ï¼‰ï¼š</b>å¤®è¡ŒçŸ­æœŸæ”¾æ°´ä½†å¸‚åœºé¢„æœŸæœªæ¥æ”¶ç´§ã€‚
    </div>
  </div>
  <div class="chart-box">
    <h3>ğŸ“ˆ Shiboréš”å¤œåˆ©ç‡èµ°åŠ¿</h3>
    <div class="chart-wrap"><canvas id="shiborOnChart"></canvas></div>
    <div class="chart-note">
      <b>Shiboréš”å¤œ(O/N)ï¼š</b>é“¶è¡Œé—´æœ€çŸ­æœŸçš„èµ„é‡‘ä»·æ ¼ï¼Œåæ˜ å½“å¤©å¸‚åœºèµ„é‡‘æ¾ç´§ã€‚<br>
      <b>< 1.2%ï¼š</b>èµ„é‡‘æåº¦å®½æ¾ï¼Œ"é’±å¤šåˆ°æº¢å‡ºæ¥"ã€‚<br>
      <b>> 2.5%ï¼š</b>èµ„é‡‘é¢åç´§ï¼Œè·¨æœˆ/è·¨å­£æ—¶å¸¸è§ã€‚<br>
      <b>è¶‹åŠ¿æ€§ä¸‹è¡Œï¼š</b>å¤®è¡Œåœ¨æŒç»­æ”¾æ°´ã€‚
    </div>
  </div>
</div>

<div class="chart-row section">
  <div class="chart-box">
    <h3>ğŸ“Š DR007 / R007 èµ°åŠ¿</h3>
    <div class="chart-wrap"><canvas id="drChart"></canvas></div>
    <div class="chart-note">
      <b>DR007ï¼š</b>é“¶è¡Œé—´å­˜æ¬¾ç±»æœºæ„7å¤©å›è´­åˆ©ç‡ï¼Œæ˜¯å¤®è¡Œè´§å¸æ”¿ç­–æ“ä½œçš„æ ¸å¿ƒåˆ©ç‡é”šã€‚<br>
      <b>R007ï¼š</b>å…¨å¸‚åœº7å¤©å›è´­åˆ©ç‡ï¼ˆå«éé“¶ï¼‰ï¼Œé€šå¸¸é«˜äºDR007ï¼ŒäºŒè€…ä»·å·®åæ˜ éé“¶èèµ„å‹åŠ›ã€‚<br>
      <b>å¤®è¡Œæ€åº¦ï¼š</b>DR007å›´ç»•æ”¿ç­–åˆ©ç‡æ³¢åŠ¨ã€‚æŒç»­ä½äºæ”¿ç­–åˆ©ç‡=å¤®è¡Œåœ¨åˆ»æ„æ”¾æ°´ã€‚
    </div>
  </div>
  <div class="chart-box">
    <h3>ğŸ’° M1/M2 åŒæ¯” & å‰ªåˆ€å·®</h3>
    <div class="chart-wrap"><canvas id="moneyChart"></canvas></div>
    <div class="chart-note">
      <b>M1ï¼š</b>æ´»æœŸå­˜æ¬¾+ç°é‡‘ï¼Œä»£è¡¨"å‡†å¤‡èŠ±å‡ºå»çš„é’±"ã€‚M1ä¸Šå‡=ä¼ä¸š/å±…æ°‘åœ¨æ´»åŒ–èµ„é‡‘ï¼Œç»æµå›æš–ä¿¡å·ã€‚<br>
      <b>M2ï¼š</b>å¹¿ä¹‰è´§å¸ï¼ŒåŒ…å«å®šæœŸã€‚M2é«˜ä½†M1ä½=é’±éƒ½è¶´åœ¨è´¦ä¸Šä¸åŠ¨ï¼Œç»æµåå†·ã€‚<br>
      <b>M1-M2å‰ªåˆ€å·®ï¼š</b>> 0 èµ„é‡‘æ´»åŒ–ï¼ˆåˆ©å¥½è‚¡å¸‚ï¼‰ï¼Œ< -5% èµ„é‡‘ä¿å®ˆï¼ˆåˆ©å¥½å€ºå¸‚ï¼‰ã€‚
    </div>
  </div>
</div>

</div>
<script>
var DATA;
function loadData(){
  fetch('liquidity.json?t='+Date.now())
    .then(function(r){return r.json()})
    .then(function(d){DATA=d;render()})
    .catch(function(e){document.getElementById('loadingMsg').textContent='åŠ è½½å¤±è´¥: '+e.message})
}
function render(){
  document.getElementById('loadingMsg').style.display='none';
  document.getElementById('app').style.display='';
  document.getElementById('updateTime').textContent='æ›´æ–°: '+(DATA.update_time||'');
  var sigs=DATA.signals||[];
  document.getElementById('signalTags').innerHTML=sigs.map(function(s){
    var cls='signal-tag';
    if(s.indexOf('ğŸŸ¢')>=0) cls+=' good';
    else if(s.indexOf('ğŸ”´')>=0) cls+=' risk';
    else if(s.indexOf('ğŸŸ¡')>=0) cls+=' warn';
    return '<span class="'+cls+'">'+s+'</span>';
  }).join('');
  renderShiborTerm();
  renderShiborOn();
  renderDR();
  renderMoney();
}
function renderShiborTerm(){
  var st=DATA.shibor_term;
  if(!st)return;
  new Chart(document.getElementById('shiborTermChart'),{type:'line',
    data:{labels:st.tenors,datasets:[
      {label:'å½“æ—¥',data:st.today,borderColor:'#6366f1',borderWidth:2.5,tension:0.3,pointRadius:5,pointBackgroundColor:'#6366f1'},
      {label:'ä¸€å‘¨å‰',data:st.week_ago,borderColor:'#f59e0b',borderWidth:1.5,tension:0.3,pointRadius:3,borderDash:[4,4]},
      {label:'ä¸€æœˆå‰',data:st.month_ago,borderColor:'#8b92a5',borderWidth:1.5,tension:0.3,pointRadius:3,borderDash:[6,3]}
    ]},
    options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
      plugins:{legend:{position:'top',labels:{font:{size:11}}}},
      scales:{y:{title:{display:true,text:'%',font:{size:10}},grid:{color:'#f0f0f0'}},x:{}}}
  });
}
function renderShiborOn(){
  var d=DATA.shibor_on||[];
  if(!d.length)return;
  new Chart(document.getElementById('shiborOnChart'),{type:'line',
    data:{labels:d.map(function(x){return x.date}),datasets:[
      {label:'Shibor O/N %',data:d.map(function(x){return x.value}),borderColor:'#6366f1',backgroundColor:'#6366f118',fill:true,tension:0.3,borderWidth:2,pointRadius:0}
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
      scales:{y:{grid:{color:'#f0f0f0'}},x:{ticks:{maxRotation:0,autoSkip:true,maxTicksLimit:12,font:{size:10}}}}}
  });
}
function renderDR(){
  var d=DATA.dr007||[];
  if(!d.length)return;
  var datasets=[{label:'DR007 %',data:d.map(function(x){return x.dr007}),borderColor:'#dc2626',borderWidth:2,tension:0.3,pointRadius:0}];
  if(d.some(function(x){return x.r007!=null})){
    datasets.push({label:'R007 %',data:d.map(function(x){return x.r007}),borderColor:'#f59e0b',borderWidth:1.5,tension:0.3,pointRadius:0,borderDash:[4,4]});
  }
  new Chart(document.getElementById('drChart'),{type:'line',
    data:{labels:d.map(function(x){return x.date}),datasets:datasets},
    options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
      plugins:{legend:{position:'top',labels:{font:{size:11}}}},
      scales:{y:{grid:{color:'#f0f0f0'}},x:{ticks:{maxRotation:0,autoSkip:true,maxTicksLimit:12,font:{size:10}}}}}
  });
}
function renderMoney(){
  var d=DATA.money_supply||[];
  if(!d.length)return;
  new Chart(document.getElementById('moneyChart'),{type:'line',
    data:{labels:d.map(function(x){var m=String(x.month).replace('.0','');return m.substring(0,4)+'-'+m.substring(4)}),datasets:[
      {label:'M1åŒæ¯”%',data:d.map(function(x){return x.m1}),borderColor:'#6366f1',borderWidth:2,tension:0.3,pointRadius:0},
      {label:'M2åŒæ¯”%',data:d.map(function(x){return x.m2}),borderColor:'#10b981',borderWidth:2,tension:0.3,pointRadius:0},
      {label:'å‰ªåˆ€å·®%',data:d.map(function(x){return x.scissors}),borderColor:'#f59e0b',borderWidth:2,tension:0.3,pointRadius:0,borderDash:[4,4]}
    ]},
    options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},
      plugins:{legend:{position:'top',labels:{font:{size:11}}}},
      scales:{y:{grid:{color:'#f0f0f0'}},x:{ticks:{maxRotation:0,autoSkip:true,maxTicksLimit:12,font:{size:10}}}}}
  });
}
loadData();
</script>
</body></html>
