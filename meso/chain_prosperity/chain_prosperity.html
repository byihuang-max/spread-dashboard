<!DOCTYPE html>
<html lang="zh"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ä¸­è§‚æ™¯æ°”åº¦ - äº§ä¸šé“¾</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,'PingFang SC','Helvetica Neue',sans-serif;background:#f5f6f8;color:#2d3142;padding:20px;font-size:14px}
.signal-bar{background:linear-gradient(135deg,#1e2433,#2a3350);border-radius:12px;padding:16px 20px;color:#e2e6ed;display:flex;align-items:center;gap:16px;flex-wrap:wrap;margin-bottom:20px}
.signal-main{font-size:18px;font-weight:800}
.signal-tags{display:flex;gap:8px;flex-wrap:wrap}
.signal-tag{background:rgba(255,255,255,0.1);padding:4px 12px;border-radius:20px;font-size:12px;color:#b8bfce}
.signal-tag.good{background:rgba(34,197,94,0.2);color:#4ade80}
.signal-tag.risk{background:rgba(239,68,68,0.2);color:#f87171}
.signal-tag.warn{background:rgba(245,158,11,0.25);color:#fbbf24}
.signal-tag.info{background:rgba(59,130,246,0.2);color:#60a5fa}

.chain-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:20px}
@media(max-width:1200px){.chain-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.chain-grid{grid-template-columns:1fr}}

.chain-card{background:#fff;border-radius:12px;border:1px solid #e8eaef;overflow:hidden}
.chain-header{padding:14px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f0f1f4}
.chain-name{font-size:16px;font-weight:800}
.chain-signal{font-size:12px;padding:3px 10px;border-radius:16px;font-weight:600}
.chain-signal.good{background:#dcfce7;color:#16a34a}
.chain-signal.risk{background:#fef2f2;color:#dc2626}
.chain-signal.warn{background:#fef9c3;color:#a16207}
.chain-signal.info{background:#dbeafe;color:#2563eb}
.chain-signal.neutral{background:#f3f4f6;color:#6b7280}

.tier{padding:10px 16px;border-bottom:1px solid #f8f9fa}
.tier:last-child{border-bottom:none}
.tier-label{font-size:10px;font-weight:700;color:#8b92a5;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
.tier-items{display:flex;flex-direction:column;gap:4px}
.tier-item{display:flex;justify-content:space-between;align-items:center;font-size:12px}
.tier-item .item-name{color:#374151;font-weight:600;flex:1}
.tier-item .item-chg{font-weight:700;min-width:55px;text-align:right}
.tier-item .item-arrow{min-width:24px;text-align:center;font-size:13px}
.up{color:#dc2626} .down{color:#16a34a} .flat{color:#9ca3af}

.chain-footer{padding:10px 16px;background:#f9fafb;font-size:11px;color:#6b7280;line-height:1.6}
.chain-footer .label{font-weight:700;color:#374151}
.share-badge{display:inline-block;padding:1px 6px;border-radius:8px;font-size:10px;font-weight:600;margin-left:4px}
.share-badge.inflow{background:#dcfce7;color:#16a34a}
.share-badge.outflow{background:#fef2f2;color:#dc2626}

.chart-note{font-size:11px;color:#8b92a5;line-height:1.7;margin-top:16px;padding:12px 14px;background:#fff;border-radius:10px;border:1px solid #e8eaef}
.chart-note b{color:#374151}

.loading{text-align:center;padding:60px;color:#8b92a5}
</style>
</head>
<body>
<div class="loading" id="loadingMsg">åŠ è½½ä¸­...</div>
<div id="app" style="display:none">

<div class="signal-bar">
  <div class="signal-main">ä¸­è§‚æ™¯æ°”åº¦</div>
  <div class="signal-tags" id="signalTags"></div>
  <div style="margin-left:auto;font-size:11px;color:#7c8598" id="updateTime"></div>
</div>

<div class="chain-grid" id="chainGrid"></div>

<div class="chart-note">
  <b>ğŸ“– æ€ä¹ˆçœ‹äº§ä¸šé“¾æ™¯æ°”ä¼ å¯¼ï¼š</b><br><br>
  <b>ä¸Šæ¸¸æ¶¨ + ä¸­æ¸¸æ¶¨ + ä¸‹æ¸¸æ¶¨ = å…¨é“¾æ™¯æ°”ğŸŸ¢</b> â†’ éœ€æ±‚é©±åŠ¨å‹ä¸Šæ¶¨ï¼Œæ•´æ¡é“¾éƒ½åœ¨èµšé’±ï¼Œå¯ä»¥è¶…é…ã€‚<br>
  <b>ä¸Šæ¸¸æ¶¨ + ä¸‹æ¸¸è·Œ = æˆæœ¬æŒ¤å‹âš ï¸</b> â†’ åŸææ–™æ¶¨ä»·ä½†ä¸‹æ¸¸ä¼ ä¸å‡ºå»ï¼Œä¸­æ¸¸åˆ¶é€ æœ€å—ä¼¤ã€‚<br>
  <b>ä¸‹æ¸¸ç‹¬ç«‹èµ°å¼ºğŸ”µ</b> â†’ å¯èƒ½æ˜¯æ”¿ç­–åˆºæ¿€æˆ–æ¶ˆè´¹å›æš–ï¼Œä½†ä¸Šæ¸¸æ²¡è·Ÿè¯´æ˜æŒç»­æ€§å¾…è§‚å¯Ÿã€‚<br>
  <b>å…¨é“¾ä¸‹è¡ŒğŸ”´</b> â†’ æ™¯æ°”ä¸‹è¡Œå‘¨æœŸï¼Œæ§åˆ¶ä»“ä½ã€‚<br><br>
  <b>ETFä»½é¢å˜åŒ–ï¼š</b>æ­£=èµ„é‡‘æµå…¥ï¼ˆå¸‚åœºåœ¨åŠ ä»“ï¼‰ï¼Œè´Ÿ=èµ„é‡‘æµå‡ºã€‚ä»½é¢æ–¹å‘å’Œä»·æ ¼æ–¹å‘ä¸ä¸€è‡´æ—¶æ˜¯é‡è¦ä¿¡å·â€”â€”<br>
  ä»·æ ¼è·Œä½†ä»½é¢å¢="è¶Šè·Œè¶Šä¹°"ï¼ˆæœºæ„åœ¨æŠ„åº•ï¼‰ï¼›ä»·æ ¼æ¶¨ä½†ä»½é¢å‡="è¾¹æ¶¨è¾¹è·‘"ï¼ˆè·åˆ©äº†ç»“ï¼‰ã€‚<br><br>
  <b>æ¶¨è·Œå¹…è¯´æ˜ï¼š</b>5æ—¥=çŸ­æœŸåŠ¨é‡ï¼Œ20æ—¥=ä¸­æœŸè¶‹åŠ¿ã€‚ç®­å¤´: â†—â†—å¼ºåŠ¿(>2%), â†—æ¸©å’Œä¸Šæ¶¨, â†’æŒå¹³, â†˜æ¸©å’Œä¸‹è·Œ, â†˜â†˜å¼±åŠ¿(<-2%)ã€‚
</div>

</div>
<script>
var DATA;
function loadData(){
  fetch('chain_prosperity.json?t='+Date.now())
    .then(function(r){return r.json()})
    .then(function(d){DATA=d;render()})
    .catch(function(e){document.getElementById('loadingMsg').textContent='åŠ è½½å¤±è´¥: '+e.message})
}

function fmtChg(v){
  if(v==null) return '<span class="flat">â€”</span>';
  var cls=v>0.5?'up':v<-0.5?'down':'flat';
  return '<span class="'+cls+'">'+(v>0?'+':'')+v.toFixed(2)+'%</span>';
}
function arrow(v){
  if(v==null) return 'â€”';
  if(v>2) return 'â†—â†—';
  if(v>0.5) return 'â†—';
  if(v>-0.5) return 'â†’';
  if(v>-2) return 'â†˜';
  return 'â†˜â†˜';
}
function sigClass(emoji){
  if(emoji=='ğŸŸ¢') return 'good';
  if(emoji=='ğŸ”´') return 'risk';
  if(emoji=='âš ï¸'||emoji=='ğŸŸ¡') return 'warn';
  if(emoji=='ğŸ”µ') return 'info';
  return 'neutral';
}

function render(){
  document.getElementById('loadingMsg').style.display='none';
  document.getElementById('app').style.display='';
  document.getElementById('updateTime').textContent='æ›´æ–°: '+(DATA.update_time||'');

  // ä¿¡å·æ 
  var sigs=DATA.signals||[];
  document.getElementById('signalTags').innerHTML=sigs.map(function(s){
    var cls='signal-tag';
    if(s.indexOf('ğŸŸ¢')>=0) cls+=' good';
    else if(s.indexOf('ğŸ”´')>=0) cls+=' risk';
    else if(s.indexOf('âš ï¸')>=0||s.indexOf('ğŸŸ¡')>=0) cls+=' warn';
    else if(s.indexOf('ğŸ”µ')>=0) cls+=' info';
    return '<span class="'+cls+'">'+s+'</span>';
  }).join('');

  // äº§ä¸šé“¾å¡ç‰‡
  var grid=document.getElementById('chainGrid');
  var html='';
  var order=['tech','pharma','cycle','consumer'];
  for(var i=0;i<order.length;i++){
    var key=order[i];
    var c=DATA.chains[key];
    if(!c) continue;
    var sc=sigClass(c.emoji);
    html+='<div class="chain-card">';
    html+='<div class="chain-header"><span class="chain-name">'+c.name+'</span><span class="chain-signal '+sc+'">'+c.emoji+' '+c.signal+'</span></div>';

    var tierOrder=[['upstream','ä¸Šæ¸¸'],['midstream','ä¸­æ¸¸'],['downstream','ä¸‹æ¸¸']];
    for(var t=0;t<tierOrder.length;t++){
      var tk=tierOrder[t][0], tl=tierOrder[t][1];
      var tier=c.tiers[tk]||{items:[]};
      html+='<div class="tier"><div class="tier-label">'+tl+'</div><div class="tier-items">';
      var items=tier.items||[];
      if(items.length===0){
        html+='<div class="tier-item"><span class="item-name" style="color:#aaa">æš‚æ— æ•°æ®</span></div>';
      }
      for(var j=0;j<items.length;j++){
        var it=items[j];
        var chgVal=it.chg_5d!=null?it.chg_5d:(it.chg_pct!=null?it.chg_pct:null);
        var shareHtml='';
        if(it.share_chg_5d!=null){
          var sc2=it.share_chg_5d>0?'inflow':'outflow';
          shareHtml=' <span class="share-badge '+sc2+'">'+(it.share_chg_5d>0?'+':'')+Math.round(it.share_chg_5d/10000)+'äº¿ä»½</span>';
        }
        html+='<div class="tier-item">';
        html+='<span class="item-name">'+it.name+shareHtml+'</span>';
        html+='<span class="item-chg">'+fmtChg(chgVal)+'</span>';
        html+='<span class="item-arrow">'+(chgVal!=null?arrow(chgVal):'â€”')+'</span>';
        html+='</div>';
      }
      html+='</div></div>';
    }

    html+='</div>';
  }
  grid.innerHTML=html;
}

loadData();
</script>
</body></html>
